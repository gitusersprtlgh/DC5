function checkPlayType(e,t){if("function"==typeof e.canPlayType){if("object"==typeof t){for(var n=t.length,r="";n--&&!(r=checkPlayType(e,t[n])););return r}n=e.canPlayType(t);if("no"!==n&&""!==n)return t}return""}(function(){var e=Math,t=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"",n=/android/gi.test(navigator.appVersion),r=/iphone|ipad/gi.test(navigator.appVersion),i=/playbook/gi.test(navigator.appVersion),s=/hp-tablet/gi.test(navigator.appVersion),o="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,u="ontouchstart"in window&&!s,a=t+"Transform"in document.documentElement.style,f=r||i,l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),c=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,h="onorientationchange"in window?"orientationchange":"resize",p=u?"touchstart":"mousedown",d=u?"touchmove":"mousemove",v=u?"touchend":"mouseup",m=u?"touchcancel":"mouseup",g="Moz"==t?"DOMMouseScroll":"mousewheel",y="translate"+(o?"3d(":"("),b=o?",0)":")",i=function(e,i){var s=this,l;s.wrapper="object"==typeof e?e:document.getElementById(e);s.wrapper.style.overflow="hidden";s.scroller=s.wrapper.children[0];s.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:n,hideScrollbar:r,fadeScrollbar:r&&o,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(l in i)s.options[l]=i[l];s.x=s.options.x;s.y=s.options.y;s.options.useTransform=a?s.options.useTransform:!1;s.options.hScrollbar=s.options.hScroll&&s.options.hScrollbar;s.options.vScrollbar=s.options.vScroll&&s.options.vScrollbar;s.options.zoom=s.options.useTransform&&s.options.zoom;s.options.useTransition=f&&s.options.useTransition;s.options.zoom&&n&&(y="translate(",b=")");s.scroller.style[t+"TransitionProperty"]=s.options.useTransform?"-"+t.toLowerCase()+"-transform":"top left";s.scroller.style[t+"TransitionDuration"]="0";s.scroller.style[t+"TransformOrigin"]="0 0";s.options.useTransition&&(s.scroller.style[t+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");s.options.useTransform?s.scroller.style[t+"Transform"]=y+s.x+"px,"+s.y+"px"+b:s.scroller.style.cssText+=";position:absolute;top:"+s.y+"px;left:"+s.x+"px";s.options.useTransition&&(s.options.fixedScrollbar=!0);s.refresh();s._bind(h,window);s._bind(p);u||(s._bind("mouseout",s.wrapper),"none"!=s.options.wheelAction&&s._bind(g));s.options.checkDOMChanges&&(s.checkDOMTime=setInterval(function(){s._checkDOMChanges()},500))};i.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){switch(e.type){case p:if(!u&&0!==e.button)break;this._start(e);break;case d:this._move(e);break;case v:case m:this._end(e);break;case h:this._resize();break;case g:this._wheel(e);break;case"mouseout":this._mouseout(e);break;case"webkitTransitionEnd":this._transitionEnd(e)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(n){var r=document,i;this[n+"Scrollbar"]?(this[n+"ScrollbarWrapper"]||(i=r.createElement("div"),this.options.scrollbarClass?i.className=this.options.scrollbarClass+n.toUpperCase():i.style.cssText="position:absolute;z-index:100;"+("h"==n?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),i.style.cssText+=";pointer-events:none;-"+t+"-transition-property:opacity;-"+t+"-transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(i),this[n+"ScrollbarWrapper"]=i,i=r.createElement("div"),this.options.scrollbarClass||(i.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(120,104,91,0.9);-"+t+"-background-clip:padding-box;-"+t+"-box-sizing:border-box;"+("h"==n?"height:100%":"width:100%")+";-"+t+"-border-radius:3px;border-radius:3px"),i.style.cssText+=";pointer-events:none;-"+t+"-transition-property:-"+t+"-transform;-"+t+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+t+"-transition-duration:0;-"+t+"-transform:"+y+"0,0"+b,this.options.useTransition&&(i.style.cssText+=";-"+t+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[n+"ScrollbarWrapper"].appendChild(i),this[n+"ScrollbarIndicator"]=i),"h"==n?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=e.max(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW>>0,8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=e.max(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH>>0,8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(n,!0)):this[n+"ScrollbarWrapper"]&&(a&&(this[n+"ScrollbarIndicator"].style[t+"Transform"]=""),this[n+"ScrollbarWrapper"].parentNode.removeChild(this[n+"ScrollbarWrapper"]),this[n+"ScrollbarWrapper"]=null,this[n+"ScrollbarIndicator"]=null)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},n?200:0)},_pos:function(e,n){e=this.hScroll?e:0;n=this.vScroll?n:0;this.options.useTransform?this.scroller.style[t+"Transform"]=y+e+"px,"+n+"px"+b+" scale("+this.scale+")":(e>>=0,n>>=0,this.scroller.style.left=e+"px",this.scroller.style.top=n+"px");this.x=e;this.y=n;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(e,n){var r="h"==e?this.x:this.y;this[e+"Scrollbar"]&&(r*=this[e+"ScrollbarProp"],0>r?(this.options.fixedScrollbar||(r=this[e+"ScrollbarIndicatorSize"]+(3*r>>0),8>r&&(r=8),this[e+"ScrollbarIndicator"].style["h"==e?"width":"height"]=r+"px"),r=0):r>this[e+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?r=this[e+"ScrollbarMaxScroll"]:(r=this[e+"ScrollbarIndicatorSize"]-(3*(r-this[e+"ScrollbarMaxScroll"])>>0),8>r&&(r=8),this[e+"ScrollbarIndicator"].style["h"==e?"width":"height"]=r+"px",r=this[e+"ScrollbarMaxScroll"]+(this[e+"ScrollbarIndicatorSize"]-r))),this[e+"ScrollbarWrapper"].style[t+"TransitionDelay"]="0",this[e+"ScrollbarWrapper"].style.opacity=n&&this.options.hideScrollbar?"0":"1",this[e+"ScrollbarIndicator"].style[t+"Transform"]=y+("h"==e?r+"px,0":"0,"+r+"px")+b)},_start:function(n){var r=u?n.touches[0]:n,i,s;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,n);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&u&&1<n.touches.length&&(s=e.abs(n.touches[0].pageX-n.touches[1].pageX),i=e.abs(n.touches[0].pageY-n.touches[1].pageY),this.touchesDistStart=e.sqrt(s*s+i*i),this.originX=e.abs(n.touches[0].pageX+n.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=e.abs(n.touches[0].pageY+n.touches[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,n));this.options.momentum&&(this.options.useTransform?(i=getComputedStyle(this.scroller,null)[t+"Transform"].replace(/[^0-9-.,]/g,"").split(","),s=1*i[4],i=1*i[5]):(s=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),i=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),s!=this.x||i!=this.y)&&(this.options.useTransition?this._unbind("webkitTransitionEnd"):c(this.aniTime),this.steps=[],this._pos(s,i));this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=r.pageX;this.pointY=r.pageY;this.startTime=n.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,n);this._bind(d);this._bind(v);this._bind(m)}},_move:function(n){var r=u?n.touches[0]:n,i=r.pageX-this.pointX,s=r.pageY-this.pointY,o=this.x+i,a=this.y+s,f=n.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,n);if(this.options.zoom&&u&&1<n.touches.length)o=e.abs(n.touches[0].pageX-n.touches[1].pageX),a=e.abs(n.touches[0].pageY-n.touches[1].pageY),this.touchesDist=e.sqrt(o*o+a*a),this.zoomed=!0,r=1/this.touchesDistStart*this.touchesDist*this.scale,r<this.options.zoomMin?r=.5*this.options.zoomMin*Math.pow(2,r/this.options.zoomMin):r>this.options.zoomMax&&(r=2*this.options.zoomMax*Math.pow(.5,this.options.zoomMax/r)),this.lastScale=r/this.scale,o=this.originX-this.originX*this.lastScale+this.x,a=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[t+"Transform"]=y+o+"px,"+a+"px"+b+" scale("+r+")",this.options.onZoom&&this.options.onZoom.call(this,n);else{this.pointX=r.pageX;this.pointY=r.pageY;if(0<o||o<this.maxScrollX)o=this.options.bounce?this.x+i/2:0<=o||0<=this.maxScrollX?0:this.maxScrollX;if(a>this.minScrollY||a<this.maxScrollY)a=this.options.bounce?this.y+s/2:a>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=i;this.distY+=s;this.absDistX=e.abs(this.distX);this.absDistY=e.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(a=this.y,s=0):this.absDistY>this.absDistX+5&&(o=this.x,i=0)),this.moved=!0,this._pos(o,a),this.dirX=0<i?-1:0>i?1:0,this.dirY=0<s?-1:0>s?1:0,300<f-this.startTime&&(this.startTime=f,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,n))}},_end:function(n){if(!u||0==n.touches.length){var r=this,i=u?n.changedTouches[0]:n,s,o,a={dist:0,time:0},f={dist:0,time:0},l=(n.timeStamp||Date.now())-r.startTime,c=r.x,h=r.y;r._unbind(d);r._unbind(v);r._unbind(m);r.options.onBeforeScrollEnd&&r.options.onBeforeScrollEnd.call(r,n);if(r.zoomed)c=r.scale*r.lastScale,c=Math.max(r.options.zoomMin,c),c=Math.min(r.options.zoomMax,c),r.lastScale=c/r.scale,r.scale=c,r.x=r.originX-r.originX*r.lastScale+r.x,r.y=r.originY-r.originY*r.lastScale+r.y,r.scroller.style[t+"TransitionDuration"]="200ms",r.scroller.style[t+"Transform"]=y+r.x+"px,"+r.y+"px"+b+" scale("+r.scale+")",r.zoomed=!1,r.refresh(),r.options.onZoomEnd&&r.options.onZoomEnd.call(r,n);else{if(r.moved){if(300>l&&r.options.momentum){a=c?r._momentum(c-r.startX,l,-r.x,r.scrollerW-r.wrapperW+r.x,r.options.bounce?r.wrapperW:0):a;f=h?r._momentum(h-r.startY,l,-r.y,0>r.maxScrollY?r.scrollerH-r.wrapperH+r.y-r.minScrollY:0,r.options.bounce?r.wrapperH:0):f;c=r.x+a.dist;h=r.y+f.dist;if(0<r.x&&0<c||r.x<r.maxScrollX&&c<r.maxScrollX)a={dist:0,time:0};if(r.y>r.minScrollY&&h>r.minScrollY||r.y<r.maxScrollY&&h<r.maxScrollY)f={dist:0,time:0}}a.dist||f.dist?(a=e.max(e.max(a.time,f.time),10),r.options.snap&&(f=c-r.absStartX,l=h-r.absStartY,e.abs(f)<r.options.snapThreshold&&e.abs(l)<r.options.snapThreshold?r.scrollTo(r.absStartX,r.absStartY,200):(f=r._snap(c,h),c=f.x,h=f.y,a=e.max(f.time,a))),r.scrollTo(c>>0,h>>0,a)):r.options.snap?(f=c-r.absStartX,l=h-r.absStartY,e.abs(f)<r.options.snapThreshold&&e.abs(l)<r.options.snapThreshold?r.scrollTo(r.absStartX,r.absStartY,200):(f=r._snap(r.x,r.y),(f.x!=r.x||f.y!=r.y)&&r.scrollTo(f.x,f.y,f.time))):r._resetPos(200)}else u&&(r.doubleTapTimer&&r.options.zoom?(clearTimeout(r.doubleTapTimer),r.doubleTapTimer=null,r.options.onZoomStart&&r.options.onZoomStart.call(r,n),r.zoom(r.pointX,r.pointY,1==r.scale?r.options.doubleTapZoom:1),r.options.onZoomEnd&&setTimeout(function(){r.options.onZoomEnd.call(r,n)},200)):r.doubleTapTimer=setTimeout(function(){r.doubleTapTimer=null;for(s=i.target;1!=s.nodeType;)s=s.parentNode;"SELECT"!=s.tagName&&"INPUT"!=s.tagName&&"TEXTAREA"!=s.tagName&&(o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!0,n.view,1,i.screenX,i.screenY,i.clientX,i.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),o._fake=!0,s.dispatchEvent(o))},r.options.zoom?250:0)),r._resetPos(200);r.options.onTouchEnd&&r.options.onTouchEnd.call(r,n)}}},_resetPos:function(e){var n=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,r=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(n==this.x&&r==this.y){if(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==t&&(this.hScrollbarWrapper.style[t+"TransitionDelay"]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar)"webkit"==t&&(this.vScrollbarWrapper.style[t+"TransitionDelay"]="300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(n,r,e||0)},_wheel:function(e){var t=this,n,r;if("wheelDeltaX"in e)n=e.wheelDeltaX/12,r=e.wheelDeltaY/12;else if("wheelDelta"in e)n=r=e.wheelDelta/12;else{if(!("detail"in e))return;n=r=3*-e.detail}if("zoom"==t.options.wheelAction){if(r=t.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0)),r<t.options.zoomMin&&(r=t.options.zoomMin),r>t.options.zoomMax&&(r=t.options.zoomMax),r!=t.scale)!t.wheelZoomCount&&t.options.onZoomStart&&t.options.onZoomStart.call(t,e),t.wheelZoomCount++,t.zoom(e.pageX,e.pageY,r,400),setTimeout(function(){t.wheelZoomCount--;!t.wheelZoomCount&&t.options.onZoomEnd&&t.options.onZoomEnd.call(t,e)},400)}else n=t.x+n,r=t.y+r,0<n?n=0:n<t.maxScrollX&&(n=t.maxScrollX),r>t.minScrollY?r=t.minScrollY:r<t.maxScrollY&&(r=t.maxScrollY),t.scrollTo(n,r,0)},_mouseout:function(e){var t=e.relatedTarget;if(t)for(;t=t.parentNode;)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){e.target==this.scroller&&(this._unbind("webkitTransitionEnd"),this._startAni())},_startAni:function(){var t=this,n=t.x,r=t.y,i=Date.now(),s,o,u;t.animating||(t.steps.length?(s=t.steps.shift(),s.x==n&&s.y==r&&(s.time=0),t.animating=!0,t.moved=!0,t.options.useTransition)?(t._transitionTime(s.time),t._pos(s.x,s.y),t.animating=!1,s.time?t._bind("webkitTransitionEnd"):t._resetPos(0)):(u=function(){var a=Date.now();if(a>=i+s.time){t._pos(s.x,s.y);t.animating=!1;t.options.onAnimationEnd&&t.options.onAnimationEnd.call(t);t._startAni()}else{a=(a-i)/s.time-1;o=e.sqrt(1-a*a);a=(s.x-n)*o+n;t._pos(a,(s.y-r)*o+r);t.animating&&(t.aniTime=l(u))}},u()):t._resetPos(400))},_transitionTime:function(e){e+="ms";this.scroller.style[t+"TransitionDuration"]=e;this.hScrollbar&&(this.hScrollbarIndicator.style[t+"TransitionDuration"]=e);this.vScrollbar&&(this.vScrollbarIndicator.style[t+"TransitionDuration"]=e)},_momentum:function(t,n,r,i,s){var n=e.abs(t)/n,o=n*n/.0012;0<t&&o>r?(r+=s/(6/(6e-4*(o/n))),n=n*r/o,o=r):0>t&&o>i&&(i+=s/(6/(6e-4*(o/n))),n=n*i/o,o=i);return{dist:o*(0>t?-1:1),time:n/6e-4>>0}},_offset:function(e){for(var t=-e.offsetLeft,n=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,n-=e.offsetTop;e!=this.wrapper&&(t*=this.scale,n*=this.scale);return{left:t,top:n}},_snap:function(t,n){var r,i,s;s=this.pagesX.length-1;r=0;for(i=this.pagesX.length;r<i;r++)if(t>=this.pagesX[r]){s=r;break}s==this.currPageX&&0<s&&0>this.dirX&&s--;t=this.pagesX[s];i=(i=e.abs(t-this.pagesX[this.currPageX]))?500*(e.abs(this.x-t)/i):0;this.currPageX=s;s=this.pagesY.length-1;for(r=0;r<s;r++)if(n>=this.pagesY[r]){s=r;break}s==this.currPageY&&0<s&&0>this.dirY&&s--;n=this.pagesY[s];r=(r=e.abs(n-this.pagesY[this.currPageY]))?500*(e.abs(this.y-n)/r):0;this.currPageY=s;s=e.max(i,r)>>0;return{x:t,y:n,time:s||200}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){this.scroller.style[t+"Transform"]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(h,window);this._unbind(p);this._unbind(d);this._unbind(v);this._unbind(m);this.options.hasTouch||(this._unbind("mouseout",this.wrapper),this._unbind(g));this.options.useTransition&&this._unbind("webkitTransitionEnd");this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var e,n,r,i=0;n=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=this.scroller.offsetWidth*this.scale>>0;this.scrollerH=(this.scroller.offsetHeight+this.minScrollY)*this.scale>>0;this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;e=this._offset(this.wrapper);this.wrapperOffsetLeft=-e.left;this.wrapperOffsetTop=-e.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=[];r=this.scroller.querySelectorAll(this.options.snap);e=0;for(n=r.length;e<n;e++)i=this._offset(r[e]),i.left+=this.wrapperOffsetLeft,i.top+=this.wrapperOffsetTop,this.pagesX[e]=i.left<this.maxScrollX?this.maxScrollX:i.left*this.scale,this.pagesY[e]=i.top<this.maxScrollY?this.maxScrollY:i.top*this.scale}else if(this.options.snap){for(this.pagesX=[];i>=this.maxScrollX;)this.pagesX[n]=i,i-=this.wrapperW,n++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);n=i=0;for(this.pagesY=[];i>=this.maxScrollY;)this.pagesY[n]=i,i-=this.wrapperH,n++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[t+"TransitionDuration"]="0",this._resetPos(200))},scrollTo:function(e,t,n,r){var i=e;this.stop();i.length||(i=[{x:e,y:t,time:n,relative:r}]);e=0;for(t=i.length;e<t;e++)i[e].relative&&(i[e].x=this.x-i[e].x,i[e].y=this.y-i[e].y),this.steps.push({x:i[e].x,y:i[e].y,time:i[e].time||0});this._startAni()},scrollToElement:function(t,n){var r;if(t=t.nodeType?t:this.scroller.querySelector(t))r=this._offset(t),r.left+=this.wrapperOffsetLeft,r.top+=this.wrapperOffsetTop,r.left=0<r.left?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>this.minScrollY?this.minScrollY:r.top<this.maxScrollY?this.maxScrollY:r.top,n=void 0===n?e.max(2*e.abs(r.left),2*e.abs(r.top)):n,this.scrollTo(r.left,r.top,n)},scrollToPage:function(e,t,n){n=void 0===n?400:n;this.options.onScrollStart&&this.options.onScrollStart.call(this);if(this.options.snap)e="next"==e?this.currPageX+1:"prev"==e?this.currPageX-1:e,t="next"==t?this.currPageY+1:"prev"==t?this.currPageY-1:t,e=0>e?0:e>this.pagesX.length-1?this.pagesX.length-1:e,t=0>t?0:t>this.pagesY.length-1?this.pagesY.length-1:t,this.currPageX=e,this.currPageY=t,e=this.pagesX[e],t=this.pagesY[t];else if(e*=-this.wrapperW,t*=-this.wrapperH,e<this.maxScrollX&&(e=this.maxScrollX),t<this.maxScrollY)t=this.maxScrollY;this.scrollTo(e,t,n)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(d);this._unbind(v);this._unbind(m)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):c(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(e,n,r,i){var s=r/this.scale;this.options.useTransform&&(this.zoomed=!0,i=void 0===i?200:i,e=e-this.wrapperOffsetLeft-this.x,n=n-this.wrapperOffsetTop-this.y,this.x=e-e*s+this.x,this.y=n-n*s+this.y,this.scale=r,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[t+"TransitionDuration"]=i+"ms",this.scroller.style[t+"Transform"]=y+this.x+"px,"+this.y+"px"+b+" scale("+r+")",this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};"undefined"!=typeof exports?exports.iScroll=i:window.iScroll=i})();var minplayer=minplayer||{};minplayer.compatibility=function(){var e=null,e=document.createElement("video");this.videoOGG=checkPlayType(e,"video/ogg");this.videoH264=checkPlayType(e,["video/mp4","video/h264"]);this.videoWEBM=checkPlayType(e,["video/x-webm","video/webm","application/octet-stream"]);e=document.createElement("audio");this.audioOGG=checkPlayType(e,"audio/ogg");this.audioMP3=checkPlayType(e,"audio/mpeg");this.audioMP4=checkPlayType(e,"audio/mp4")};minplayer.playTypes||(minplayer.playTypes=new minplayer.compatibility,minplayer.isAndroid=/android/gi.test(navigator.appVersion),minplayer.isIDevice=/iphone|ipad/gi.test(navigator.appVersion),minplayer.isPlaybook=/playbook/gi.test(navigator.appVersion),minplayer.isTouchPad=/hp-tablet/gi.test(navigator.appVersion),minplayer.hasTouch="ontouchstart"in window&&!minplayer.isTouchPad);minplayer=minplayer||{};minplayer.async=function(){this.value=null;this.queue=[]};minplayer.async.prototype.get=function(e){this.value!==null?e(this.value):this.queue.push(e)};minplayer.async.prototype.set=function(e){this.value=e;var t=this.queue.length;if(t){for(;t--;)this.queue[t](e);this.queue=[]}};minplayer=minplayer||{};minplayer.flags=function(){this.flag=0;this.ids={};this.numFlags=0};minplayer.flags.prototype.setFlag=function(e,t){if(!this.ids.hasOwnProperty(e)){this.ids[e]=this.numFlags;this.numFlags++}this.flag=t?this.flag|1<<this.ids[e]:this.flag&~(1<<this.ids[e])};minplayer=minplayer||{};minplayer.plugins=minplayer.plugins||{};minplayer.queue=minplayer.queue||[];minplayer.lock=!1;minplayer.plugin=function(e,t,n,r){this.name=e;this.pluginReady=!1;this.options=n||{};this.queue=r||{};this.triggered={};this.lock=!1;if(t){this.context=jQuery(t);this.construct()}};minplayer.plugin.prototype.construct=function(){this.addPlugin()};minplayer.plugin.prototype.destroy=function(){this.unbind()};minplayer.plugin.prototype.create=function(e,t,n){var r=null,t=t||"minplayer";window[t][e]||(t="minplayer");n=n||this.display;if(window[t][e]){r=window[t][e];r[this.options.template]&&(r=r[this.options.template]);typeof r!="function"&&(r=window.minplayer[e]);if(typeof r=="function")return new r(n,this.options)}return null};minplayer.plugin.prototype.ready=function(){if(!this.pluginReady){this.pluginReady=!0;this.trigger("ready");this.checkQueue()}};minplayer.plugin.prototype.isValid=function(){return!!this.options.id};minplayer.plugin.prototype.addPlugin=function(e,t){e=e||this.name;t=t||this;if(t.isValid()){minplayer.plugins[this.options.id]||(minplayer.plugins[this.options.id]={});minplayer.plugins[this.options.id][e]||(minplayer.plugins[this.options.id][e]=[]);minplayer.plugins[this.options.id][e].push(t);this.checkQueue(t)}};minplayer.plugin.prototype.poll=function(e,t){setTimeout(function(n){return function r(){e.call(n)&&setTimeout(r,t)}}(this),t)};minplayer.plugin.prototype.get=function(e,t){if(typeof e=="function"){t=e;e=null}return minplayer.get.call(this,this.options.id,e,t)};minplayer.plugin.prototype.checkQueue=function(e){var t=null,n=0,r=!1,i=[],e=e||this;minplayer.lock=!0;for(var s=minplayer.queue.length,n=0;n<s;n++)if(minplayer.queue.hasOwnProperty(n)){t=minplayer.queue[n];r=!t.id&&!t.plugin;r|=t.plugin==e.name;(r&=!t.id||t.id==this.options.id)&&(r=minplayer.bind.call(t.context,t.event,this.options.id,e.name,t.callback));r||i.push(t)}minplayer.queue=i;minplayer.lock=!1};minplayer.plugin.prototype.trigger=function(e,t){this.triggered[e]=t;if(this.queue.hasOwnProperty(e)){var n=0,r={},i=this.queue[e];for(n in i)if(i.hasOwnProperty(n)){r=i[n];r.callback({target:this,data:r.data},t)}}return this};minplayer.plugin.prototype.bind=function(e,t,n){if(typeof t=="function"){n=t;t=null}if(e&&n){this.queue[e]=this.queue[e]||[];this.unbind(e,n);this.queue[e].push({callback:n,data:t});this.triggered.hasOwnProperty(e)&&n({target:this,data:t},this.triggered[e]);return this}};minplayer.plugin.prototype.unbind=function(e,t){this.lock&&setTimeout(function(n){return function(){n.unbind(e,t)}}(this),10);this.lock=!0;var n=this.queue.hasOwnProperty(e)?this.queue[e]:null;if(e)if(t){if(n){var r=0,i={};for(r in n)if(n.hasOwnProperty(r)&&n[r].callback===t){i=this.queue[e].splice(1,1);delete i}}}else this.queue[e]=[];else this.queue={};this.lock=!1;return this};minplayer.addQueue=function(e,t,n,r,i){minplayer.lock?setTimeout(function(){minplayer.addQueue(e,n,t,r,i)},10):minplayer.queue.push({context:e,id:n,event:t,plugin:r,callback:i})};minplayer.bind=function(e,t,n,r){if(!r)return!1;var i=minplayer.plugins,s=[],o=function(e,t){if(i.hasOwnProperty(e)&&i[e].hasOwnProperty(t))for(var n=i[e][t].length;n--;)s.push(i[e][t][n])};if(t&&n)o(t,n);else if(!t&&n)for(t in i)o(t,n);else if(t&&!n&&i[t])for(n in i[t])o(t,n);else if(!t&&!n)for(t in i)for(n in i[t])o(t,n);for(o=s.length;o--;)s[o].bind(e,function(e){return function(t){r.call(e,t.target)}}(this));s.length==0&&minplayer.addQueue(this,e,t,n,r);return s.length>0};minplayer.get=function(e,t,n){if(typeof e=="function"){n=e;t=e=null}if(typeof t=="function"){n=t;t=e;e=null}if(n=typeof n=="function"?n:null)minplayer.bind.call(this,"ready",e,t,n);else{var r=minplayer.plugins;if(!e&&!t&&!n)return r;if(e&&!t&&!n)return r[e];if(e&&t&&!n)return r[e][t];if(!e&&t&&!n){n=[];for(e in r)if(r.hasOwnProperty(e)&&r[e].hasOwnProperty(t))for(var i=r[e][t].length;i--;)n.push(r[e][t][i]);return n}}};minplayer=minplayer||{};minplayer.display=function(e,t,n,r){minplayer.plugin.call(this,e,t,n,r)};minplayer.display.prototype=new minplayer.plugin;minplayer.display.prototype.constructor=minplayer.display;minplayer.display.prototype.getDisplay=function(){return this.context};minplayer.display.prototype.construct=function(){this.display=this.getDisplay(this.context,this.options);minplayer.plugin.prototype.construct.call(this);this.elements=this.getElements();if(this.onResize){var e=0;jQuery(window).resize(function(t){return function(){clearTimeout(e);e=setTimeout(function(){t.onResize()},200)}}(this))}};minplayer.display.prototype.onResize=!1;minplayer.display.prototype.hide=function(e){if(e=e||this.display){e.forceHide=!0;e.unbind().hide()}};minplayer.display.prototype.fullScreenElement=function(){return this.display};minplayer.click=function(e,t){var n=!1,e=jQuery(e);e.bind("touchstart click",function(e){if(!n){n=!0;setTimeout(function(){n=!1},100);t.call(this,e)}});return e};minplayer.display.prototype.onFocus=function(e){this.hasFocus=this.focus=e};minplayer.showThenHide=function(e,t,n){if(e){t=t||5e3;if(!e.showTimer){e.shown=!0;minplayer.click(document,function(){minplayer.showThenHide(e,t,n)});jQuery(document).bind("mousemove",function(){minplayer.showThenHide(e,t,n)})}clearTimeout(e.showTimer);if(!e.shown&&!e.forceHide){e.shown=!0;e.show();n&&n(!0)}e.showTimer=setTimeout(function(){e.hide("slow",function(){e.shown=!1;n&&n(!1)})},t)}};minplayer.display.prototype.fullscreen=function(e){var t=this.isFullScreen(),n=this.fullScreenElement();if(t&&!e){n.removeClass("fullscreen");screenfull&&screenfull.exit();this.trigger("fullscreen",!1)}else if(!t&&e){n.addClass("fullscreen");if(screenfull){screenfull.request(n[0]);screenfull.onchange=function(e){return function(){screenfull.isFullscreen||e.fullscreen(!1)}}(this)}this.trigger("fullscreen",!0)}};minplayer.display.prototype.toggleFullScreen=function(){this.fullscreen(!this.isFullScreen())};minplayer.display.prototype.isFullScreen=function(){return this.fullScreenElement().hasClass("fullscreen")};minplayer.display.prototype.getScaledRect=function(e,t){var n={};n.x=t.x?t.x:0;n.y=t.y?t.y:0;n.width=t.width?t.width:0;n.height=t.height?t.height:0;if(e){if(t.width/t.height>e){n.height=t.height;n.width=Math.floor(t.height*e)}else{n.height=Math.floor(t.width/e);n.width=t.width}n.x=Math.floor((t.width-n.width)/2);n.y=Math.floor((t.height-n.height)/2)}return n};minplayer.display.prototype.getElements=function(){return{}};(function(e,t){var n=function(){for(var e=[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreen","fullscreenElement"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement"]],n=0,r=e.length;n<r;n++)if(e.hasOwnProperty(n)){var i=e[n];if(i[1]in t)return i}}();if(!n)return e.screenfull=!1;var r="ALLOW_KEYBOARD_INPUT"in Element,i={init:function(){t.addEventListener(n[2],function(e){i.isFullscreen=t[n[3]];i.element=t[n[4]];i.onchange(e)});return this},isFullscreen:t[n[3]],element:t[n[4]],request:function(e){e=e||t.documentElement;e[n[0]](r&&Element.ALLOW_KEYBOARD_INPUT);t.isFullscreen||e[n[0]]()},exit:function(){t[n[1]]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){}};e.screenfull=i.init()})(window,document);jQuery.fn.minplayer||(jQuery.fn.minplayer=function(e){return jQuery(this).each(function(){e=e||{};e.id=e.id||jQuery(this).attr("id")||Math.random();if(!minplayer.plugins[e.id]){e.template=e.template||"default";minplayer[e.template]?new minplayer[e.template](jQuery(this),e):new minplayer(jQuery(this),e)}})});minplayer=jQuery.extend(function(e,t){minplayer.display.call(this,"player",e,t)},minplayer);minplayer.prototype=new minplayer.display;minplayer.prototype.constructor=minplayer;minplayer.prototype.construct=function(){jQuery.each(this.context[0].attributes,function(e){return function(t,n){e.options[n.name]=e.options[n.name]||n.value}}(this));this.options=jQuery.extend({id:"player",build:!1,wmode:"transparent",preload:!0,autoplay:!1,autoload:!0,loop:!1,width:"100%",height:"350px",debug:!1,volume:80,files:null,file:"",preview:"",attributes:{},logo:"",link:"",width:"100%",height:"100%"},this.options);minplayer.display.prototype.construct.call(this);this.controller=this.create("controller");this.playLoader=this.create("playLoader");minplayer.click(document,function(e){return function(t){var n=jQuery(t.target).closest("#"+e.options.id).length!=0;minplayer.get.call(this,e.options.id,null,function(e){e.onFocus(n)})}}(this));if(this.options.logo&&this.elements.logo){var e="";this.options.link&&(e+='<a target="_blank" href="'+this.options.link+'">');e+='<img src="'+this.options.logo+'" >';this.options.link&&(e+="</a>");this.logo=this.elements.logo.append(e)}this.currentPlayer="html5";this.addKeyEvents();this.load(this.getFiles());this.ready()};minplayer.prototype.addEvents=function(){minplayer.get.call(this,this.options.id,null,function(e){return function(t){t.bind("error",function(t,n){if(e.currentPlayer=="html5"){e.options.file.player="minplayer";e.loadPlayer()}else e.error(n)});t.bind("fullscreen",function(){e.resize()})}}(this))};minplayer.prototype.error=function(e){e=e||"";if(this.elements.error){this.elements.error.text(e);e?this.elements.error.show():this.elements.error.hide()}};minplayer.prototype.addKeyEvents=function(){jQuery(document).bind("keydown",function(e){return function(t){switch(t.keyCode){case 113:case 27:e.isFullScreen()&&e.fullscreen(!1)}}}(this))};minplayer.prototype.getFiles=function(){if(this.options.files)return this.options.files;if(this.options.file)return this.options.file;var e=[],t=null;if(this.elements.media){(t=this.elements.media.attr("src"))&&e.push({path:t});jQuery("source",this.elements.media).each(function(){e.push({path:jQuery(this).attr("src"),mimetype:jQuery(this).attr("type"),codecs:jQuery(this).attr("codecs")})})}return e};minplayer.prototype.getMediaFile=function(e){if(!e)return null;if(typeof e=="string")return new minplayer.file({path:e});if(e.path||e.id)return new minplayer.file(e);for(var t=e.length,n=null,r=null;t--;){r=e[t];r=typeof r=="string"?new minplayer.file({path:r}):new minplayer.file(r);r.priority>0&&(n=r)}return n};minplayer.prototype.loadPlayer=
function(){if(this.options.file&&this.elements.display.length!=0)if(this.options.file.player){this.error();var e=this.options.file.player.toString();if(!this.media||e!==this.currentPlayer){this.currentPlayer=e;if(this.elements.display){e={};if(this.media){e=this.media.queue;this.media.destroy()}pClass=minplayer.players[this.options.file.player];this.options.mediaelement=this.elements.media;this.media=new pClass(this.elements.display,this.options,e);this.get("media",function(e){return function(t){t.load(e.options.file)}}(this))}else this.error("No media display found.")}else this.media&&this.media.load(this.options.file)}else this.error("Cannot play media: "+this.options.file.mimetype)};minplayer.prototype.load=function(e){this.options.files=e||this.options.files;this.options.file=this.getMediaFile(this.options.files);this.loadPlayer();this.addEvents()};minplayer.prototype.resize=function(){this.get(function(e){e.onResize&&e.onResize()})};minplayer=minplayer||{};minplayer.image=function(e,t){this.loaded=!1;this.loader=null;this.ratio=0;this.img=null;minplayer.display.call(this,"image",e,t)};minplayer.image.prototype=new minplayer.display;minplayer.image.prototype.constructor=minplayer.image;minplayer.image.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.display.css("overflow","hidden");this.loader=new Image;this.loader.onload=function(e){return function(){e.loaded=!0;e.ratio=e.loader.width/e.loader.height;e.resize();e.trigger("loaded")}}(this);this.ready()};minplayer.image.prototype.load=function(e){this.clear(function(){this.display.empty();this.img=jQuery(document.createElement("img")).attr({src:""}).hide();this.display.append(this.img);this.loader.src=e;this.img.attr("src",e)})};minplayer.image.prototype.clear=function(e){this.loaded=!1;this.img?this.img.fadeOut(function(t){return function(){t.img.attr("src","");t.loader.src="";jQuery(this).remove();e.call(t)}}(this)):e.call(this)};minplayer.image.prototype.resize=function(e,t){e=e||this.display.width();t=t||this.display.height();if(e&&t&&this.loaded){var n=this.getScaledRect(this.ratio,{width:e,height:t});this.img&&this.img.attr("src",this.loader.src).css({marginLeft:n.x,marginTop:n.y,width:n.width,height:n.height});this.img.fadeIn()}};minplayer.image.prototype.onResize=function(){this.resize()};minplayer=minplayer||{};minplayer.file=function(e){this.duration=e.duration||0;this.bytesTotal=e.bytesTotal||0;this.quality=e.quality||0;this.stream=e.stream||"";this.path=e.path||"";this.codecs=e.codecs||"";this.extension=e.extension||this.getFileExtension();this.mimetype=e.mimetype||e.filemime||this.getMimeType();this.type=e.type||this.getType();if(!this.type){this.mimetype=this.getMimeType();this.type=this.getType()}this.player=e.player||this.getBestPlayer();this.priority=e.priority||this.getPriority();this.id=e.id||this.getId();this.path||(this.path=this.id)};minplayer.file.prototype.getBestPlayer=function(){var e=null,t=0;jQuery.each(minplayer.players,function(n){return function(r,i){var s=i.getPriority();if(i.canPlay(n)&&s>t){e=r;t=s}}}(this));return e};minplayer.file.prototype.getPriority=function(){var e=1;this.player&&(e=minplayer.players[this.player].getPriority());switch(this.mimetype){case"video/x-webm":case"video/webm":case"application/octet-stream":return e*10;case"video/mp4":case"audio/mp4":case"audio/mpeg":return e*9;case"video/ogg":case"audio/ogg":case"video/quicktime":return e*8;default:return e*5}};minplayer.file.prototype.getFileExtension=function(){return this.path.substring(this.path.lastIndexOf(".")+1).toLowerCase()};minplayer.file.prototype.getMimeType=function(){switch(this.extension){case"mp4":case"m4v":case"flv":case"f4v":return"video/mp4";case"webm":return"video/webm";case"ogg":case"ogv":return"video/ogg";case"3g2":return"video/3gpp2";case"3gpp":case"3gp":return"video/3gpp";case"mov":return"video/quicktime";case"swf":return"application/x-shockwave-flash";case"oga":return"audio/ogg";case"mp3":return"audio/mpeg";case"m4a":case"f4a":return"audio/mp4";case"aac":return"audio/aac";case"wav":return"audio/vnd.wave";case"wma":return"audio/x-ms-wma";default:return"unknown"}};minplayer.file.prototype.getType=function(){var e=this.mimetype.match(/([^\/]+)(\/)/),e=e&&e.length>1?e[1]:"";return e=="video"||this.mimetype=="application/octet-stream"?"video":e=="audio"?"audio":""};minplayer.file.prototype.getId=function(){var e=minplayer.players[this.player];return e&&e.getMediaId?e.getMediaId(this):""};minplayer=minplayer||{};minplayer.playLoader=function(e,t){this.busy=new minplayer.flags;this.bigPlay=new minplayer.flags;this.preview=null;this.enabled=!0;minplayer.display.call(this,"playLoader",e,t)};minplayer.playLoader.prototype=new minplayer.display;minplayer.playLoader.prototype.constructor=minplayer.playLoader;minplayer.playLoader.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.get("media",function(e){if(e.hasPlayLoader()){this.enabled=!1;this.hide(this.elements.busy);this.hide(this.elements.bigPlay);this.hide()}else{this.enabled=!0;this.options.preview||(this.options.preview=e.elements.media.attr("poster"));e.elements.media.attr("poster","");this.loadPreview();this.elements.bigPlay&&minplayer.click(this.elements.bigPlay.unbind(),function(t){t.preventDefault();jQuery(this).hide();e.play()});e.unbind("loadstart").bind("loadstart",function(e){return function(){e.busy.setFlag("media",!0);e.bigPlay.setFlag("media",!0);e.preview&&e.elements.preview.show();e.checkVisibility()}}(this));e.bind("waiting",function(e){return function(){e.busy.setFlag("media",!0);e.checkVisibility()}}(this));e.bind("loadeddata",function(e){return function(){e.busy.setFlag("media",!1);e.checkVisibility()}}(this));e.bind("playing",function(e){return function(){e.busy.setFlag("media",!1);e.bigPlay.setFlag("media",!1);e.preview&&e.elements.preview.hide();e.checkVisibility()}}(this));e.bind("pause",function(e){return function(){e.bigPlay.setFlag("media",!0);e.checkVisibility()}}(this))}});this.ready()};minplayer.playLoader.prototype.loadPreview=function(){if(this.enabled&&this.elements.preview)if(this.options.preview){this.elements.preview.addClass("has-preview").show();this.preview=new minplayer.image(this.elements.preview,this.options);this.preview.load(this.options.preview)}else this.elements.preview.hide()};minplayer.playLoader.prototype.checkVisibility=function(){if(this.enabled){this.busy.flag?this.elements.busy.show():this.elements.busy.hide();this.bigPlay.flag?this.elements.bigPlay.show():this.elements.bigPlay.hide();(this.bigPlay.flag||this.busy.flag)&&this.display.show();!this.bigPlay.flag&&!this.busy.flag&&this.display.hide()}};minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.base=function(e,t,n){minplayer.display.call(this,"media",e,t,n)};minplayer.players.base.prototype=new minplayer.display;minplayer.players.base.prototype.constructor=minplayer.players.base;minplayer.players.base.prototype.getElements=function(){var e=minplayer.display.prototype.getElements.call(this);return jQuery.extend(e,{media:this.options.mediaelement})};minplayer.players.base.getPriority=function(){return 0};minplayer.players.base.getMediaId=function(){return""};minplayer.players.base.canPlay=function(){return!1};minplayer.players.base.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.mediaFile=this.options.file;this.clear();this.playerFound()||this.addPlayer();this.player=this.getPlayer();minplayer.click(this.display,function(e){return function(){e.playing&&e.pause()}}(this));jQuery(document).bind("keydown",function(e){return function(t){if(e.hasFocus){t.preventDefault();switch(t.keyCode){case 32:case 179:e.playing?e.pause():e.play();break;case 38:e.setVolumeRelative(.1);break;case 40:e.setVolumeRelative(-0.1);break;case 37:case 227:e.seekRelative(-0.05);break;case 39:case 228:e.seekRelative(.05)}}}}(this))};minplayer.players.base.prototype.addPlayer=function(){this.elements.media&&this.elements.media.remove();this.elements.media=jQuery(this.create());this.display.html(this.elements.media)};minplayer.players.base.prototype.destroy=function(){minplayer.plugin.prototype.destroy.call(this);this.clear()};minplayer.players.base.prototype.clear=function(){this.playerReady=!1;this.reset();this.player&&jQuery(this.player).unbind()};minplayer.players.base.prototype.reset=function(){this.duration=new minplayer.async;this.currentTime=new minplayer.async;this.bytesLoaded=new minplayer.async;this.bytesTotal=new minplayer.async;this.bytesStart=new minplayer.async;this.volume=new minplayer.async;this.loading=this.playing=this.hasFocus=!1;this.trigger("pause");this.trigger("waiting");this.trigger("progress",{loaded:0,total:0,start:0});this.trigger("timeupdate",{currentTime:0,duration:0})};minplayer.players.base.prototype.onReady=function(){if(!this.playerReady){this.playerReady=!0;this.setVolume(this.options.volume/100);this.loading=!0;this.poll(function(e){return function(){e.loading&&e.getBytesLoaded(function(t){e.getBytesTotal(function(n){if(t||n){var r=0;e.getBytesStart(function(e){r=e});e.trigger("progress",{loaded:t,total:n,start:r});t>=n&&(e.loading=!1)}})});return e.loading}}(this),1e3);this.ready();this.trigger("loadstart")}};minplayer.players.base.prototype.onPlaying=function(){this.trigger("playing");this.playing=this.hasFocus=!0;this.poll(function(e){return function(){e.playing&&e.getCurrentTime(function(t){e.getDuration(function(n){t=parseFloat(t);n=parseFloat(n);(t||n)&&e.trigger("timeupdate",{currentTime:t,duration:n})})});return e.playing}}(this),1e3)};minplayer.players.base.prototype.onPaused=function(){this.trigger("pause");this.playing=this.hasFocus=!1};minplayer.players.base.prototype.onComplete=function(){this.hasFocus=this.loading=this.playing=!1;this.trigger("ended")};minplayer.players.base.prototype.onLoaded=function(){this.options.autoplay&&this.play();this.trigger("loadeddata")};minplayer.players.base.prototype.onWaiting=function(){this.trigger("waiting")};minplayer.players.base.prototype.onError=function(e){this.hasFocus=!1;this.trigger("error",e)};minplayer.players.base.prototype.isReady=function(){return this.player&&this.playerReady};minplayer.players.base.prototype.hasPlayLoader=function(){return!1};minplayer.players.base.prototype.hasController=function(){return!1};minplayer.players.base.prototype.playerFound=function(){return!1};minplayer.players.base.prototype.create=function(){this.reset();return null};minplayer.players.base.prototype.getPlayer=function(){return this.player};minplayer.players.base.prototype.load=function(e){var t=typeof this.mediaFile=="string"?this.mediaFile:this.mediaFile.path;if(e&&this.isReady()&&e.path!=t){this.reset();this.mediaFile=e;return!0}return!1};minplayer.players.base.prototype.play=function(){return this.isReady()};minplayer.players.base.prototype.pause=function(){return this.isReady()};minplayer.players.base.prototype.stop=function(){this.hasFocus=this.loading=this.playing=!1;return this.isReady()};minplayer.players.base.prototype.seekRelative=function(e){this.getCurrentTime(function(t){return function(n){t.getDuration(function(r){if(r){var i=0,i=e>-1&&e<1?(n/r+parseFloat(e))*r:n+parseFloat(e);t.seek(i)}})}}(this))};minplayer.players.base.prototype.seek=function(){return this.isReady()};minplayer.players.base.prototype.getValue=function(e,t){if(this.isReady()){var n=this.player[e]();n!==void 0&&n!==null&&t(n)}};minplayer.players.base.prototype.setVolumeRelative=function(e){this.getVolume(function(t){return function(n){n+=parseFloat(e);n=n<0?0:n;t.setVolume(n>1?1:n)}}(this))};minplayer.players.base.prototype.setVolume=function(e){this.trigger("volumeupdate",e);return this.isReady()};minplayer.players.base.prototype.getVolume=function(e){return this.volume.get(e)};minplayer.players.base.prototype.getCurrentTime=function(e){return this.currentTime.get(e)};minplayer.players.base.prototype.getDuration=function(e){return this.duration.get(e)};minplayer.players.base.prototype.getBytesStart=function(e){return this.bytesStart.get(e)};minplayer.players.base.prototype.getBytesLoaded=function(e){return this.bytesLoaded.get(e)};minplayer.players.base.prototype.getBytesTotal=function(e){return this.bytesTotal.get(e)};minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.html5=function(e,t,n){minplayer.players.base.call(this,e,t,n)};minplayer.players.html5.prototype=new minplayer.players.base;minplayer.players.html5.prototype.constructor=minplayer.players.html5;minplayer.players.html5.getPriority=function(){return 10};minplayer.players.html5.canPlay=function(e){switch(e.mimetype){case"video/ogg":return!!minplayer.playTypes.videoOGG;case"video/mp4":case"video/x-mp4":case"video/m4v":case"video/x-m4v":return!!minplayer.playTypes.videoH264;case"video/x-webm":case"video/webm":case"application/octet-stream":return!!minplayer.playTypes.videoWEBM;case"audio/ogg":return!!minplayer.playTypes.audioOGG;case"audio/mpeg":return!!minplayer.playTypes.audioMP3;case"audio/mp4":return!!minplayer.playTypes.audioMP4;default:return!1}};minplayer.players.html5.prototype.construct=function(){minplayer.players.base.prototype.construct.call(this);this.addEvents()};minplayer.players.html5.prototype.addEvents=function(){if(this.player){jQuery(this.player).unbind();this.player.addEventListener("abort",function(e){return function(){e.trigger("abort")}}(this),!1);this.player.addEventListener("loadstart",function(e){return function(){e.onReady()}}(this),!1);this.player.addEventListener("loadeddata",function(e){return function(){e.onLoaded()}}(this),!1);this.player.addEventListener("loadedmetadata",function(e){return function(){e.onLoaded()}}(this),!1);this.player.addEventListener("canplaythrough",function(e){return function(){e.onLoaded()}}(this),!1);this.player.addEventListener("ended",function(e){return function(){e.onComplete()}}(this),!1);this.player.addEventListener("pause",function(e){return function(){e.onPaused()}}(this),!1);this.player.addEventListener("play",function(e){return function(){e.onPlaying()}}(this),!1);this.player.addEventListener("playing",function(e){return function(){e.onPlaying()}}(this),!1);this.player.addEventListener("error",function(e){return function(){e.trigger("error","An error occured - "+this.error.code)}}(this),!1);this.player.addEventListener("waiting",function(e){return function(){e.onWaiting()}}(this),!1);this.player.addEventListener("durationchange",function(e){return function(){e.duration.set(this.duration);e.trigger("durationchange",{duration:this.duration})}}(this),!1);this.player.addEventListener("progress",function(e){return function(t){e.bytesTotal.set(t.total);e.bytesLoaded.set(t.loaded)}}(this),!1);return!0}return!1};minplayer.players.html5.prototype.onReady=function(){minplayer.players.base.prototype.onReady.call(this);minplayer.isAndroid&&this.onLoaded();if(minplayer.isIDevice){this.play();setTimeout(function(e){return function(){e.pause();e.onLoaded()}}(this),1)}};minplayer.players.html5.prototype.playerFound=function(){return this.display.find(this.mediaFile.type).length>0};minplayer.players.html5.prototype.create=function(){minplayer.players.base.prototype.create.call(this);var e=jQuery(document.createElement(this.mediaFile.type)).attr(this.options.attributes).append(jQuery(document.createElement("source")).attr({src:this.mediaFile.path}));e.eq(0)[0].setAttribute("width","100%");e.eq(0)[0].setAttribute("height","100%");e.eq(0)[0].setAttribute("autobuffer",!0);var t=this.options.autoload?"auto":"metadata",t=minplayer.isIDevice?"metadata":t;e.eq(0)[0].setAttribute("preload",t);return e};minplayer.players.html5.prototype.getPlayer=function(){return this.elements.media.eq(0)[0]};minplayer.players.html5.prototype.load=function(e){if(minplayer.players.base.prototype.load.call(this,e)){var t=this.elements.media.attr("src");t||(t=jQuery("source",this.elements.media).eq(0).attr("src"));if(t!=e.path){this.addPlayer();this.player=this.getPlayer();this.addEvents();e='<source src="'+e.path+'"></source>';this.elements.media.removeAttr("src").empty().html(e);return!0}}return!1};minplayer.players.html5.prototype.play=function(){if(minplayer.players.base.prototype.play.call(this)){this.player.play();return!0}return!1};minplayer.players.html5.prototype.pause=function(){if(minplayer.players.base.prototype.pause.call(this)){this.player.pause();return!0}return!1};minplayer.players.html5.prototype.stop=function(){if(minplayer.players.base.prototype.stop.call(this)){this.player.pause();this.player.src="";return!0}return!1};minplayer.players.html5.prototype.seek=function(e){if(minplayer.players.base.prototype.seek.call(this,e)){this.player.currentTime=e;return!0}return!1};minplayer.players.html5.prototype.setVolume=function(e){if(minplayer.players.base.prototype.setVolume.call(this,e)){this.player.volume=e;return!0}return!1};minplayer.players.html5.prototype.getVolume=function(e){this.isReady()&&e(this.player.volume)};minplayer.players.html5.prototype.getDuration=function(e){this.isReady()&&e(this.player.duration)};minplayer.players.html5.prototype.getCurrentTime=function(e){this.isReady()&&e(this.player.currentTime)};minplayer.players.html5.prototype.getBytesLoaded=function(e){if(this.isReady()){var t=0;this.bytesLoaded.value?t=this.bytesLoaded.value:this.player.buffered&&this.player.buffered.length>0&&this.player.buffered.end&&this.player.duration?t=this.player.buffered.end(0):this.player.bytesTotal!=void 0&&this.player.bytesTotal>0&&this.player.bufferedBytes!=void 0&&(t=this.player.bufferedBytes);e(t)}};minplayer.players.html5.prototype.getBytesTotal=function(e){if(this.isReady()){var t=0;this.bytesTotal.value?t=this.bytesTotal.value:this.player.buffered&&this.player.buffered.length>0&&this.player.buffered.end&&this.player.duration?t=this.player.duration:this.player.bytesTotal!=void 0&&this.player.bytesTotal>0&&this.player.bufferedBytes!=void 0&&(t=this.player.bytesTotal);e(t)}};minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.flash=function(e,t,n){minplayer.players.base.call(this,e,t,n)};minplayer.players.flash.prototype=new minplayer.players.base;minplayer.players.flash.prototype.constructor=minplayer.players.flash;minplayer.players.flash.getPriority=function(){return 0};minplayer.players.flash.canPlay=function(){return!1};minplayer.players.flash.getFlash=function(e){var t=window.location.protocol;t.charAt(t.length-1)==":"&&(t=t.substring(0,t.length-1));var n=jQuery.param(e.flashvars),r;r='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '+('codebase="'+(t+"://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0")+'" ')+'playerType="flash" '+('width="'+e.width+'" ');r+='height="'+e.height+'" ';r+='id="'+e.id+'" ';r+='name="'+e.id+'"> ';r=r+'<param name="allowScriptAccess" value="always"></param><param name="allowfullscreen" value="true" />'+('<param name="movie" value="'+e.swf+'"></param>');r+='<param name="wmode" value="'+e.wmode+'"></param>';r=r+'<param name="quality" value="high"></param>'+('<param name="FlashVars" value="'+n+'"></param>')+('<embed src="'+e.swf+'" ');r=r+'quality="high" '+('width="'+e.width+'" height="'+e.height+'" ');r+='id="'+e.id+'" name="'+e.id+'" ';r=r+'swLiveConnect="true" allowScriptAccess="always" '+('wmode="'+e.wmode+'"');return r+'allowfullscreen="true" type="application/x-shockwave-flash" '+('FlashVars="'+n+'" ')+('pluginspage="'+t)+'://www.macromedia.com/go/getflashplayer" /></object>'};minplayer.players.flash.prototype.playerFound=function(){return this.display.find('object[playerType="flash"]').length>0};minplayer.players.flash.prototype.getPlayer=function(){return jQuery(jQuery.browser.msie?"object":"embed",this.display).eq(0)[0]};minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.minplayer=function(e,t,n){minplayer.players.flash.call(this,e,t,n)};minplayer.players.minplayer.prototype=new minplayer.players.flash;minplayer.players.minplayer.prototype.constructor=minplayer.players.minplayer;window.onFlashPlayerReady=function(e){for(var e=minplayer.get(e,"media"),t=e.length;t--;)e[t].onReady()};window.onFlashPlayerUpdate=function(e,t){for(var n=minplayer.get(e,"media"),r=n.length;r--;)n[r].onMediaUpdate(t)};window.onFlashPlayerDebug=function(e){console&&console.log&&console.log(e)};minplayer.players.minplayer.getPriority=function(){return 1};minplayer.players.minplayer.canPlay=function(e){return e.type=="video"||e.type=="audio"};minplayer.players.minplayer.prototype.create=function(){this.options=jQuery.extend({swfplayer:"flash/minplayer.swf"},this.options);minplayer.players.flash.prototype.create.call(this);return minplayer.players.flash.getFlash({swf:this.options.swfplayer,id:this.options.id+"_player",width:"100%",height:"100%",flashvars:{id:this.options.id,debug:this.options.debug,config:"nocontrols",file:this.mediaFile.path,autostart:this.options.autoplay,autoload:this.options.autoload},wmode:this.options.wmode})};minplayer.players.minplayer.prototype.onMediaUpdate=function(e){switch(e){case"mediaMeta":this.onLoaded();break;case"mediaPlaying":this.minplayerloaded&&this.onPlaying();break;case"mediaPaused":this.minplayerloaded=!0;this.onPaused();break;case"mediaComplete":this.onComplete()}};minplayer.players.minplayer.prototype.clear=function(){minplayer.players.flash.prototype.clear.call(this);this.minplayerloaded=this.options.autoplay};minplayer.players.minplayer.prototype.load=function(e){if(minplayer.players.flash.prototype.load.call(this,e)){this.player.loadMedia(e.path,e.stream);return!0}return!1};minplayer.players.minplayer.prototype.play=function(){if(minplayer.players.flash.prototype.play.call(this)){this.player.playMedia();return!0}return!1};minplayer.players.minplayer.prototype.pause=function(){if(minplayer.players.flash.prototype.pause.call(this)){this.player.pauseMedia();return!0}return!1};minplayer.players.minplayer.prototype.stop=function(){if(minplayer.players.flash.prototype.stop.call(this)){this.player.stopMedia();return!0}return!1};minplayer.players.minplayer.prototype.seek=function(e){if(minplayer.players.flash.prototype.seek.call(this,e)){this.player.seekMedia(e);return!0}return!1};minplayer.players.minplayer.prototype.setVolume=function(e){if(minplayer.players.flash.prototype.setVolume.call(this,e)){this.player.setVolume(e);return!0}return!1};minplayer.players.minplayer.prototype.getVolume=function(e){this.isReady()&&e(this.player.getVolume())};minplayer.players.minplayer.prototype.getDuration=function(e){if(this.isReady()){var t=this.player.getDuration();t?e(t):this.poll(function(n){return function(){(t=n.player.getDuration())&&e(t);return!t}}(this),1e3)}};minplayer.players.minplayer.prototype.getCurrentTime=function(e){this.isReady()&&e(this.player.getCurrentTime())};minplayer.players.minplayer.prototype.getBytesLoaded=function(e){this.isReady()&&e(this.player.getMediaBytesLoaded())};minplayer.players.minplayer.prototype.getBytesTotal=function(e){this.isReady()&&e(this.player.getMediaBytesTotal())};minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.youtube=function(e,t,n){this.quality="default";minplayer.players.base.call(this,e,t,n)};minplayer.players.youtube.prototype=new minplayer.players.base;minplayer.players.youtube.prototype.constructor=minplayer.players.youtube;minplayer.players.youtube.getPriority=function(){return 10};minplayer.players.youtube.canPlay=function(e){return e.mimetype==="video/youtube"?!0:e.path.search(/^http(s)?\:\/\/(www\.)?youtube\.com/i)===0};minplayer.players.youtube.getMediaId=function(e){var t=/^http[s]?\:\/\/(www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_\-]+)/i;return e.path.search(t)===0?e.path.match(t)[2]:e.path};minplayer.players.youtube.prototype.setPlayerState=function(e){switch(e){case YT.PlayerState.BUFFERING:this.onWaiting();break;case YT.PlayerState.PAUSED:this.onPaused();break;case YT.PlayerState.PLAYING:this.onPlaying();break;case YT.PlayerState.ENDED:this.onComplete()}};minplayer.players.youtube.prototype.onReady=function(){minplayer.players.base.prototype.onReady.call(this);this.options.autoplay||this.pause();this.onLoaded()};minplayer.players.youtube.prototype.playerFound=function(){return this.display.find("iframe#"+this.options.id+"-player").length>0};minplayer.players.youtube.prototype.onPlayerStateChange=function(e){this.setPlayerState(e.data)};minplayer.players.youtube.prototype.onQualityChange=function(e){this.quality=e.data};minplayer.players.youtube.prototype.hasPlayLoader=function(){return!0};minplayer.players.youtube.prototype.hasController=function(){return minplayer.isIDevice};minplayer.players.youtube.prototype.create=function(){minplayer.players.base.prototype.create.call(this);var e=document.createElement("script");e.src="https://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);this.playerId=this.options.id+"-player";this.poll(function(e){return function(){var t=jQuery("#"+e.playerId).length>0;if(t=(t=t&&window.hasOwnProperty("YT"))&&typeof YT.Player=="function"){var n=location.protocol,n=n+("//"+location.hostname),n=n+(location.port&&":"+location.port),r={};minplayer.isIDevice?r.origin=n:r={enablejsapi:minplayer.isIDevice?0:1,origin:n,wmode:"opaque",controls:minplayer.isAndroid?1:0};e.player=new YT.Player(e.playerId,{height:"100%",width:"100%",frameborder:0,videoId:e.mediaFile.id,playerVars:r,events:{onReady:function(t){e.onReady(t)},onStateChange:function(t){e.onPlayerStateChange(t)},onPlaybackQualityChange:function(t){e.onQualityChange(t)},onError:function(t){e.onError(t)}}})}return!t}}(this),200);return jQuery(document.createElement("div")).attr({id:this.playerId})};minplayer.players.youtube.prototype.load=function(e){if(minplayer.players.base.prototype.load.call(this,e)){this.player.loadVideoById(e.id,0,this.quality);return!0}return!1};minplayer.players.youtube.prototype.play=function(){if(minplayer.players.base.prototype.play.call(this)){this.player.playVideo();return!0}return!1};minplayer.players.youtube.prototype.pause=function(){if(minplayer.players.base.prototype.pause.call(this)){this.player.pauseVideo();return!0}return!1};minplayer.players.youtube.prototype.stop=function(){if(minplayer.players.base.prototype.stop.call(this)){this.player.stopVideo();return!0}return!1};minplayer.players.youtube.prototype.seek=function(e){if(minplayer.players.base.prototype.seek.call(this,e)){this.player.seekTo(e,!0);return!0}return!1};minplayer.players.youtube.prototype.setVolume=function(e){if(minplayer.players.base.prototype.setVolume.call(this,e)){this.player.setVolume(e*100);return!0}return!1};minplayer.players.youtube.prototype.getVolume=function(e){this.getValue("getVolume",e)};minplayer.players.youtube.prototype.getDuration=function(e){this.getValue("getDuration",e)};minplayer.players.youtube.prototype.getCurrentTime=function(e){this.getValue("getCurrentTime",e)};minplayer.players.youtube.prototype.getBytesStart=function(e){this.getValue("getVideoStartBytes",e)};minplayer.players.youtube.prototype.getBytesLoaded=function(e){this.getValue("getVideoBytesLoaded",e)};minplayer.players.youtube.prototype.getBytesTotal=function(e){this.getValue("getVideoBytesTotal",e)};minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.vimeo=function(e,t,n){minplayer.players.base.call(this,e,t,n)};minplayer.players.vimeo.prototype=new minplayer.players.base;minplayer.players.vimeo.prototype.constructor=minplayer.players.vimeo;minplayer.players.vimeo.getPriority=function(){return 10};minplayer.players.vimeo.canPlay=function(e){return e.mimetype==="video/vimeo"?!0:e.path.search(/^http(s)?\:\/\/(www\.)?vimeo\.com/i)===0};minplayer.players.vimeo.prototype.hasPlayLoader=function(){return minplayer.hasTouch};minplayer.players.vimeo.prototype.hasController=function(){return minplayer.hasTouch};minplayer.players.vimeo.getMediaId=function(e){var t=/^http[s]?\:\/\/(www\.)?vimeo\.com\/(\?v\=)?([0-9]+)/i;return e.path.search(t)===0?e.path.match(t)[3]:e.path};minplayer.players.vimeo.prototype.reset=function(){minplayer.players.base.prototype.reset.call(this)};minplayer.players.vimeo.prototype.create=function(){minplayer.players.base.prototype.create.call(this);var e=document.createElement("script");e.src="http://a.vimeocdn.com/js/froogaloop2.min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);var n=document.createElement("iframe");n.setAttribute("id",this.options.id+"-player");n.setAttribute("type","text/html");n.setAttribute("width","100%");n.setAttribute("height","100%");n.setAttribute("frameborder","0");e="http://player.vimeo.com/video/"+(this.mediaFile.id+"?");e+=jQuery.param({wmode:"opaque",api:1,player_id:this.options.id+"-player",title:0,byline:0,portrait:0,autoplay:this.options.autoplay,loop:this.options.loop});n.setAttribute("src",e);this.poll(function(e){return function(){if(window.Froogaloop){e.player=window.Froogaloop(n);var t=0;e.player.addEvent("ready",function(){clearTimeout(t);e.onReady();e.onError("")});t=setTimeout(function(){e.onReady();e.onError("Unable to play video.")},2e3)}return!window.Froogaloop}}(this),200);this.trigger("loadstart");return n};minplayer.players.vimeo.prototype.onReady=function(){this.player.addEvent("loadProgress",function(e){return function(t){e.duration.set(parseFloat(t.duration));e.bytesLoaded.set(t.bytesLoaded);e.bytesTotal.set(t.bytesTotal)}}(this));this.player.addEvent("playProgress",function(e){return function(t){e.duration.set(parseFloat(t.duration));e.currentTime.set(parseFloat(t.seconds))}}(this));this.player.addEvent("play",function(e){return function(){e.onPlaying()}}(this));this.player.addEvent("pause",function(e){return function(){e.onPaused()}}(this));this.player.addEvent("finish",function(e){return function(){e.onComplete()}}(this));minplayer.players.base.prototype.onReady.call(this);this.onLoaded()};minplayer.players.vimeo.prototype.playerFound=function(){return this.display.find("iframe#"+this.options.id+"-player").length>0};minplayer.players.vimeo.prototype.play=function(){if(minplayer.players.base.prototype.play.call(this)){this.player.api("play");return!0}return!1};minplayer.players.vimeo.prototype.pause=function(){if(minplayer.players.base.prototype.pause.call(this)){this.player.api("pause");return!0}return!1};minplayer.players.vimeo.prototype.stop=function(){if(minplayer.players.base.prototype.stop.call(this)){this.player.api("unload");return!0}return!1};minplayer.players.vimeo.prototype.seek=function(e){if(minplayer.players.base.prototype.seek.call(this,e)){this.player.api("seekTo",e);return!0}return!1};minplayer.players.vimeo.prototype.setVolume=function(e){if(minplayer.players.base.prototype.setVolume.call(this,e)){this.volume.set(e);this.player.api("setVolume",e);return!0}return!1};minplayer.players.vimeo.prototype.getVolume=function(e){this.player.api("getVolume",function(t){e(t)})};minplayer.players.vimeo.prototype.getDuration=function(e){this.isReady()&&(this.duration.value?e(this.duration.value):this.player.api("getDuration",function(t){e(t)}))};minplayer=minplayer||{};minplayer.controller=function(e,t){minplayer.display.call(this,"controller",e,t)};minplayer.controller.prototype=new minplayer.display;minplayer.controller.prototype.constructor=minplayer.controller;minplayer.formatTime=function(e){var e=e||0,t=0,n=0,r=0,i="",r=Math.floor(e/3600),e=e-r*3600,n=Math.floor(e/60),t=Math.floor((e-n*60)%60);r&&(i=i+(""+r)+":");return{time:i+(n>=10?""+n:"0"+n)+":"+(t>=10?""+t:"0"+t),units:""}};minplayer.controller.prototype.getElements=function(){var e=minplayer.display.prototype.getElements.call(this);return jQuery.extend(e,{play:null,pause:null,fullscreen:null,seek:null,progress:null,volume:null,timer:null})};minplayer.controller.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.dragging=!1;this.vol=0;this.elements.seek&&(this.seekBar=this.elements.seek.slider({range:"min",create:function(e){jQuery(".ui-slider-range",e.target).addClass("ui-state-active")}}));this.elements.volume&&(this.volumeBar=this.elements.volume.slider({range:"min",orientation:"vertical"}));this.get("player",function(e){this.elements.fullscreen&&minplayer.click(this.elements.fullscreen.unbind(),function(){e.toggleFullScreen()}).css({pointer:"hand"})});this.get("media",function(e){if(e.hasController())this.hide();else{if(this.elements.pause){minplayer.click(this.elements.pause.unbind(),function(t){return function(n){n.preventDefault();t.playPause(!1,e)}}(this));e.bind("pause",function(e){return function(){e.setPlayPause(!0)}}(this))}if(this.elements.play){minplayer.click(this.elements.play.unbind(),function(t){return function(n){n.preventDefault();t.playPause(!0,e)}}(this));e.bind("playing",function(e){return function(
){e.setPlayPause(!1)}}(this))}if(this.elements.duration){e.bind("durationchange",function(e){return function(t,n){e.setTimeString("duration",n.duration)}}(this));e.getDuration(function(e){return function(t){e.setTimeString("duration",t)}}(this))}this.elements.progress&&e.bind("progress",function(e){return function(t,n){e.elements.progress.width((n.total?n.loaded/n.total*100:0)+"%")}}(this));(this.seekBar||this.elements.timer)&&e.bind("timeupdate",function(e){return function(t,n){if(!e.dragging){var r=0;n.duration&&(r=n.currentTime/n.duration*100);e.seekBar&&e.seekBar.slider("option","value",r);e.setTimeString("timer",n.currentTime)}}}(this));this.seekBar&&this.seekBar.slider({start:function(e){return function(){e.dragging=!0}}(this),stop:function(t){return function(n,r){t.dragging=!1;e.getDuration(function(t){e.seek(r.value/100*t)})}}(this),slide:function(t){return function(n,r){e.getDuration(function(n){n=r.value/100*n;t.dragging||e.seek(n);t.setTimeString("timer",n)})}}(this)});this.elements.mute&&minplayer.click(this.elements.mute,function(t){return function(n){n.preventDefault();n=t.volumeBar.slider("option","value");if(n>0){t.vol=n;t.volumeBar.slider("option","value",0);e.setVolume(0)}else{t.volumeBar.slider("option","value",t.vol);e.setVolume(t.vol/100)}}}(this));if(this.volumeBar){this.volumeBar.slider({slide:function(t,n){e.setVolume(n.value/100)}});e.bind("volumeupdate",function(e){return function(t,n){e.volumeBar.slider("option","value",n*100)}}(this));e.getVolume(function(e){return function(t){e.volumeBar.slider("option","value",t*100)}}(this))}}});this.ready()};minplayer.controller.prototype.setPlayPause=function(e){this.elements.play&&this.elements.play.css("display",e?"inherit":"none");this.elements.pause&&this.elements.pause.css("display",e?"none":"inherit")};minplayer.controller.prototype.playPause=function(e,t){var n=e?"play":"pause";this.display.trigger(n);this.setPlayPause(!e);t&&t[n]()};minplayer.controller.prototype.setTimeString=function(e,t){this.elements[e]&&this.elements[e].text(minplayer.formatTime(t).time)};jQuery.fn.osmplayer||(jQuery.fn.osmplayer=function(e){return jQuery(this).each(function(){e=e||{};e.id=e.id||jQuery(this).attr("id")||Math.random();if(!minplayer.plugins[e.id]){e.template=e.template||"default";osmplayer[e.template]?new osmplayer[e.template](jQuery(this),e):new osmplayer(jQuery(this),e)}})});osmplayer=function(e,t){minplayer.call(this,e,t)};osmplayer.prototype=new minplayer;osmplayer.prototype.constructor=osmplayer;osmplayer.prototype.create=function(e,t,n){return minplayer.prototype.create.call(this,e,"osmplayer",n)};osmplayer.prototype.construct=function(){this.options=jQuery.extend({playlist:"",node:{},swfplayer:"minplayer/flash/minplayer.swf",logo:"logo.png",link:"http://www.mediafront.org"},this.options);minplayer.prototype.construct.call(this);this.playQueue=[];this.playIndex=0;this.create("playlist","osmplayer");this.get("playlist",function(e){e.bind("nodeLoad",function(e){return function(t,n){e.loadNode(n)}}(this))});this.options.node&&this.loadNode(this.options.node)};osmplayer.prototype.fullScreenElement=function(){return this.elements.minplayer};osmplayer.prototype.loadNode=function(e){if(e&&e.mediafiles){var t=e.mediafiles.media;if(t){this.playQueue.length=0;this.playQueue=[];this.playIndex=0;this.addToQueue(t.intro);this.addToQueue(t.commercial);this.addToQueue(t.prereel);this.addToQueue(t.media);this.addToQueue(t.postreel)}this.options.preview=osmplayer.getImage(e.mediafiles.image,"preview");this.playLoader&&this.playLoader.loadPreview();this.playNext()}};osmplayer.prototype.addToQueue=function(e){e&&this.playQueue.push(this.getFile(e))};osmplayer.prototype.getFile=function(e){if(e){var t=typeof e;(t==="object"||t==="array")&&e[0]&&(e=this.getBestMedia(e))}return e};osmplayer.prototype.getBestMedia=function(e){for(var t=null,n=e.length;n--;){var r=new minplayer.file(e[n]);if(!t||r.priority>t.priority)t=r}return t};osmplayer.prototype.playNext=function(){if(this.playQueue.length>this.playIndex){this.load(this.playQueue[this.playIndex]);this.playIndex++}else{this.options.repeat||(this.options.autostart=!1);this.playIndex=0;this.playNext()}};osmplayer.getImage=function(e,t){var n="";if(e)if(e[t])n=e[t];else if(e.image)n=e.image;else for(t in e)if(e.hasOwnProperty(t)){n=e[t];break}return typeof n=="string"?n:n.path};var osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser["default"]={priority:1,valid:function(){return!0},getType:function(){return"json"},getFeed:function(e,t,n){e=e.replace(/(.*)\??(.*)/i,"$1");return e+("?start-index="+t)+("&max-results="+n)},parse:function(e){return e}};osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser.youtube={priority:10,valid:function(e){return e.search(/^http(s)?\:\/\/gdata\.youtube\.com/i)===0},getType:function(){return"jsonp"},getFeed:function(e,t,n){e=e.replace(/(.*)\??(.*)/i,"$1");return e+("?start-index="+(t+1))+("&max-results="+n)+"&v=2&alt=jsonc"},parse:function(e){var e=e.data,t={total_rows:e.totalItems,nodes:[]},n;for(n in e.items)if(e.items.hasOwnProperty(n)){var r=e.items[n];t.nodes.push({title:r.title,description:r.description,mediafiles:{image:{thumbnail:{path:r.thumbnail.sqDefault},image:{path:r.thumbnail.hqDefault}},media:{media:{player:"youtube",id:r.id}}}})}return t}};osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser.rss={priority:8,valid:function(e){e=e.replace(/(.*)\??(.*)/i,"$1");return e.match(/\.rss$/i)!==null},getType:function(){return"xml"},getFeed:function(e){return e},parse:function(e){var t={total_rows:0,nodes:[]};jQuery("rss channel",e).find("item").each(function(){osmplayer.parser.rss.addRSSItem(t,jQuery(this))});return t},addRSSItem:function(e,t){e.total_rows++;e.nodes.push({title:t.find("title").text(),description:t.find("annotation").text(),mediafiles:{image:{image:{path:t.find("image").text()}},media:{media:{path:t.find("location").text()}}}})}};osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser.asx={priority:8,valid:function(e){e=e.replace(/(.*)\??(.*)/i,"$1");return e.match(/\.asx$/i)!==null},getType:function(){return"xml"},getFeed:function(e){return e},parse:function(e){var t={total_rows:0,nodes:[]};jQuery("asx entry",e).each(function(){osmplayer.parser.rss.addRSSItem(t,jQuery(this))});return t}};osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser.xsfp={priority:8,valid:function(e){e=e.replace(/(.*)\??(.*)/i,"$1");return e.match(/\.xml$/i)!==null},getType:function(){return"xml"},getFeed:function(e){return e},parse:function(e){var t={total_rows:0,nodes:[]};jQuery("playlist trackList track",e).each(function(){osmplayer.parser.rss.addRSSItem(t,jQuery(this))});return t}};osmplayer=osmplayer||{};osmplayer.playlist=function(e,t){minplayer.display.call(this,"playlist",e,t)};osmplayer.playlist.prototype=new minplayer.display;osmplayer.playlist.prototype.constructor=osmplayer.playlist;osmplayer.playlist.prototype.construct=function(){this.options=jQuery.extend({vertical:!0,playlist:"",pageLimit:10,autoNext:!0,shuffle:!1,loop:!1,hysteresis:40,scrollSpeed:20,scrollMode:"auto"},this.options);minplayer.display.prototype.construct.call(this);this.nodes=[];this.page=-1;this.totalItems=0;this.currentItem=-1;this.playqueue=[];this.playqueuepos=0;this.playlist=this.options.playlist;this.scroll=null;if(this.elements.scroll&&this.elements.scroll.length>0){var e,t,n,r,i,s;e=this.options.vertical?"y":"x";t=this.options.vertical?"pageY":"pageX";n=this.options.vertical?"top":"left";r=this.options.vertical?"wrapperH":"wrapperW";i=this.options.vertical?"minScrollY":"minScrollX";s=this.options.vertical?"maxScrollY":"maxScrollX";this.scroll=new iScroll(this.elements.scroll.eq(0)[0],{hScroll:!this.options.vertical,hScrollbar:!this.options.vertical,vScroll:this.options.vertical,vScrollbar:this.options.vertical,hideScrollbar:!0});this.options.scrollMode=="auto"&&!minplayer.hasTouch&&this.elements.list.bind("mousemove",function(e){return function(r){r.preventDefault();e.mousePos=r[t];e.mousePos=e.mousePos-e.display.offset()[n]}}(this)).bind("mouseenter",function(t){return function(n){n.preventDefault();t.scrolling=!0;var o=function(){if(t.scrolling){var n=t.scroll[r]/2,u=t.mousePos-n;if(Math.abs(u)>t.options.hysteresis){var f=t.options.hysteresis,u=t.options.scrollSpeed*(u+f*(u>0?-1:0)),u=u/n,n=t.scroll[e]-u,f=t.scroll[i]||0,l=t.scroll[s];n>=f?t.scrollTo(f):n<=l?t.scrollTo(l):t.scrollTo(u,!0)}setTimeout(o,30)}};o()}}(this)).bind("mouseleave",function(e){return function(t){t.preventDefault();e.scrolling=!1}}(this))}this.pager=this.create("pager","osmplayer");this.pager.bind("nextPage",function(e){return function(){e.nextPage()}}(this));this.pager.bind("prevPage",function(e){return function(){e.prevPage()}}(this));this.options.autoNext&&this.get("media",function(e){e.bind("ended",function(t){return function(){e.options.autoplay=!0;t.next()}}(this))});this.next();this.ready()};osmplayer.playlist.prototype.scrollTo=function(e,t){if(this.scroll){this.scroll.options.hideScrollbar=!1;this.options.vertical?this.scroll.scrollTo(0,e,0,t):this.scroll.scrollTo(e,0,0,t);this.scroll.options.hideScrollbar=!0}};osmplayer.playlist.prototype.refresh=function(){if(this.scroll){if(!this.options.vertical){var e=0;jQuery.each(this.elements.list.children(),function(){e+=jQuery(this).outerWidth()});this.elements.list.width(e)}this.scroll.refresh();this.scroll.scrollTo(0,0,200)}};osmplayer.playlist.prototype.set=function(e,t){if(typeof e!="object")this.trigger("error","Playlist must be an object to set");else if(e.hasOwnProperty("total_rows")){if(e.total_rows&&e.nodes.length){this.totalItems=e.total_rows;this.currentItem=0;(this.page+1)*this.options.pageLimit>=this.totalItems?this.pager.nextPage.hide():this.pager.nextPage.show();var n=null,r=e.nodes.length;this.elements.list.empty();this.nodes=[];for(var i=0;i<r;i++){n=this.create("teaser","osmplayer",this.elements.list);n.setNode(e.nodes[i]);n.bind("nodeLoad",function(e,t){return function(){e.loadItem(t)}}(this,i));this.nodes.push(n);t===i&&this.loadItem(i)}this.refresh();this.trigger("playlistLoad",e)}this.elements.playlist_busy&&this.elements.playlist_busy.hide()}else this.trigger("error","Unknown playlist format.")};osmplayer.playlist.prototype.setQueue=function(){this.playqueue.push({page:this.page,item:this.currentItem});this.playqueuepos=this.playqueue.length};osmplayer.playlist.prototype.next=function(){var e=0,t=this.page;if(this.playqueuepos>=this.playqueue.length)if(this.options.shuffle){e=Math.floor(Math.random()*this.totalItems);t=Math.floor(e/this.options.pageLimit);e%=this.options.pageLimit;this.load(t,e)}else{e=this.currentItem+1;e>=this.nodes.length?this.load(t+1,0):this.loadItem(e)}else{this.playqueuepos=this.playqueuepos+1;e=this.playqueue[this.playqueuepos];this.load(e.page,e.item)}};osmplayer.playlist.prototype.prev=function(){this.playqueuepos=this.playqueuepos-1;this.playqueuepos=this.playqueuepos<0?0:this.playqueuepos;var e=this.playqueue[this.playqueuepos];e&&this.load(e.page,e.item)};osmplayer.playlist.prototype.loadItem=function(e){if(e<this.nodes.length){this.setQueue();var t=this.nodes[this.currentItem];t.select(!1);this.currentItem=e;t=this.nodes[e];t.select(!0);this.trigger("nodeLoad",t.node)}};osmplayer.playlist.prototype.nextPage=function(e){this.load(this.page+1,e)};osmplayer.playlist.prototype.prevPage=function(e){this.load(this.page-1,e)};osmplayer.playlist.prototype.load=function(e,t){this.playlist==this.options.playlist&&e==this.page&&this.loadItem(t);if(this.playlist=this.options.playlist){if(e>Math.floor(this.totalItems/this.options.pageLimit)){if(!this.options.loop)return;t=e=0}this.elements.playlist_busy&&this.elements.playlist_busy.show();e=e||0;e=e<0?0:e;this.setQueue();this.page=e;this.page==0?this.pager.prevPage.hide():this.pager.prevPage.show();if(typeof this.playlist=="object"){this.set(this.playlist,t);this.playlist.endpoint&&(this.playlist=this.options.playlist=this.playlist.endpoint)}else{var n=osmplayer.parser["default"],r;for(r in osmplayer.parser)osmplayer.parser.hasOwnProperty(r)&&osmplayer.parser[r].valid(this.playlist)&&osmplayer.parser[r].priority>n.priority&&(n=osmplayer.parser[r]);r={type:"GET",url:n.getFeed(this.playlist,this.page*this.options.pageLimit,this.options.pageLimit),success:function(e){return function(r){e.set(n.parse(r),t)}}(this),error:function(e){return function(t,n){e.elements.playlist_busy&&e.elements.playlist_busy.hide();e.trigger("error",n)}}(this)};var i="";if(i=n.getType())r.dataType=i;jQuery.ajax(r)}}};osmplayer=osmplayer||{};osmplayer.pager=function(e,t){minplayer.display.call(this,"pager",e,t)};osmplayer.pager.prototype=new minplayer.display;osmplayer.pager.prototype.constructor=osmplayer.pager;osmplayer.pager.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.elements.prevPage&&(this.prevPage=this.elements.prevPage.click(function(e){return function(t){t.preventDefault();e.trigger("prevPage")}}(this)));this.elements.nextPage&&(this.nextPage=this.elements.nextPage.click(function(e){return function(t){t.preventDefault();e.trigger("nextPage")}}(this)))};osmplayer=osmplayer||{};osmplayer.teaser=function(e,t){this.preview=null;minplayer.display.call(this,"teaser",e,t)};osmplayer.teaser.prototype=new minplayer.display;osmplayer.teaser.prototype.constructor=osmplayer.teaser;osmplayer.teaser.prototype.select=function(){};osmplayer.teaser.prototype.setNode=function(e){this.node=e;this.elements.title&&this.elements.title.text(e.title);if(e.mediafiles&&e.mediafiles.image&&(e=osmplayer.getImage(e.mediafiles.image,"thumbnail"))&&this.elements.image){this.preview=new minplayer.image(this.elements.image);this.preview.load(e)}this.display.unbind("click").click(function(e){return function(t){t.preventDefault();e.trigger("nodeLoad",e.node)}}(this))};