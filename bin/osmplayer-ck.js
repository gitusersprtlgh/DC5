/*!
 * iScroll v4.1.9 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */function checkPlayType(e,t){if(typeof e.canPlayType=="function"){if(typeof t=="object"){var n=t.length,r="";while(n--){r=checkPlayType(e,t[n]);if(!!r)break}return r}var i=e.canPlayType(t);if("no"!==i&&""!==i)return t}return""}(function(){var e=Math,t=function(e){return e>>0},n=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"",r=/android/gi.test(navigator.appVersion),i=/iphone|ipad/gi.test(navigator.appVersion),s=/playbook/gi.test(navigator.appVersion),o=/hp-tablet/gi.test(navigator.appVersion),u="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="ontouchstart"in window&&!o,f=n+"Transform"in document.documentElement.style,l=i||s,c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),h=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),p="onorientationchange"in window?"orientationchange":"resize",d=a?"touchstart":"mousedown",v=a?"touchmove":"mousemove",m=a?"touchend":"mouseup",g=a?"touchcancel":"mouseup",y=n=="Moz"?"DOMMouseScroll":"mousewheel",b="translate"+(u?"3d(":"("),w=u?",0)":")",E=function(e,t){var s=this,o=document,c;s.wrapper=typeof e=="object"?e:o.getElementById(e);s.wrapper.style.overflow="hidden";s.scroller=s.wrapper.children[0];s.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:r,hideScrollbar:i,fadeScrollbar:i&&u,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(c in t)s.options[c]=t[c];s.x=s.options.x;s.y=s.options.y;s.options.useTransform=f?s.options.useTransform:!1;s.options.hScrollbar=s.options.hScroll&&s.options.hScrollbar;s.options.vScrollbar=s.options.vScroll&&s.options.vScrollbar;s.options.zoom=s.options.useTransform&&s.options.zoom;s.options.useTransition=l&&s.options.useTransition;if(s.options.zoom&&r){b="translate(";w=")"}s.scroller.style[n+"TransitionProperty"]=s.options.useTransform?"-"+n.toLowerCase()+"-transform":"top left";s.scroller.style[n+"TransitionDuration"]="0";s.scroller.style[n+"TransformOrigin"]="0 0";s.options.useTransition&&(s.scroller.style[n+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");s.options.useTransform?s.scroller.style[n+"Transform"]=b+s.x+"px,"+s.y+"px"+w:s.scroller.style.cssText+=";position:absolute;top:"+s.y+"px;left:"+s.x+"px";s.options.useTransition&&(s.options.fixedScrollbar=!0);s.refresh();s._bind(p,window);s._bind(d);if(!a){s._bind("mouseout",s.wrapper);s.options.wheelAction!="none"&&s._bind(y)}s.options.checkDOMChanges&&(s.checkDOMTime=setInterval(function(){s._checkDOMChanges()},500))};E.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case d:if(!a&&e.button!==0)return;t._start(e);break;case v:t._move(e);break;case m:case g:t._end(e);break;case p:t._resize();break;case y:t._wheel(e);break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e)}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(r){var i=this,s=document,o;if(!i[r+"Scrollbar"]){if(i[r+"ScrollbarWrapper"]){f&&(i[r+"ScrollbarIndicator"].style[n+"Transform"]="");i[r+"ScrollbarWrapper"].parentNode.removeChild(i[r+"ScrollbarWrapper"]);i[r+"ScrollbarWrapper"]=null;i[r+"ScrollbarIndicator"]=null}return}if(!i[r+"ScrollbarWrapper"]){o=s.createElement("div");i.options.scrollbarClass?o.className=i.options.scrollbarClass+r.toUpperCase():o.style.cssText="position:absolute;z-index:100;"+(r=="h"?"height:7px;bottom:1px;left:2px;right:"+(i.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(i.hScrollbar?"7":"2")+"px;top:2px;right:1px");o.style.cssText+=";pointer-events:none;-"+n+"-transition-property:opacity;-"+n+"-transition-duration:"+(i.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(i.options.hideScrollbar?"0":"1");i.wrapper.appendChild(o);i[r+"ScrollbarWrapper"]=o;o=s.createElement("div");i.options.scrollbarClass||(o.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(120,104,91,0.9);-"+n+"-background-clip:padding-box;-"+n+"-box-sizing:border-box;"+(r=="h"?"height:100%":"width:100%")+";-"+n+"-border-radius:3px;border-radius:3px");o.style.cssText+=";pointer-events:none;-"+n+"-transition-property:-"+n+"-transform;-"+n+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+n+"-transition-duration:0;-"+n+"-transform:"+b+"0,0"+w;i.options.useTransition&&(o.style.cssText+=";-"+n+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)");i[r+"ScrollbarWrapper"].appendChild(o);i[r+"ScrollbarIndicator"]=o}if(r=="h"){i.hScrollbarSize=i.hScrollbarWrapper.clientWidth;i.hScrollbarIndicatorSize=e.max(t(i.hScrollbarSize*i.hScrollbarSize/i.scrollerW),8);i.hScrollbarIndicator.style.width=i.hScrollbarIndicatorSize+"px";i.hScrollbarMaxScroll=i.hScrollbarSize-i.hScrollbarIndicatorSize;i.hScrollbarProp=i.hScrollbarMaxScroll/i.maxScrollX}else{i.vScrollbarSize=i.vScrollbarWrapper.clientHeight;i.vScrollbarIndicatorSize=e.max(t(i.vScrollbarSize*i.vScrollbarSize/i.scrollerH),8);i.vScrollbarIndicator.style.height=i.vScrollbarIndicatorSize+"px";i.vScrollbarMaxScroll=i.vScrollbarSize-i.vScrollbarIndicatorSize;i.vScrollbarProp=i.vScrollbarMaxScroll/i.maxScrollY}i._scrollbarPos(r,!0)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},r?200:0)},_pos:function(e,r){e=this.hScroll?e:0;r=this.vScroll?r:0;if(this.options.useTransform)this.scroller.style[n+"Transform"]=b+e+"px,"+r+"px"+w+" scale("+this.scale+")";else{e=t(e);r=t(r);this.scroller.style.left=e+"px";this.scroller.style.top=r+"px"}this.x=e;this.y=r;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(e,r){var i=this,s=e=="h"?i.x:i.y,o;if(!i[e+"Scrollbar"])return;s=i[e+"ScrollbarProp"]*s;if(s<0){if(!i.options.fixedScrollbar){o=i[e+"ScrollbarIndicatorSize"]+t(s*3);o<8&&(o=8);i[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=o+"px"}s=0}else if(s>i[e+"ScrollbarMaxScroll"])if(!i.options.fixedScrollbar){o=i[e+"ScrollbarIndicatorSize"]-t((s-i[e+"ScrollbarMaxScroll"])*3);o<8&&(o=8);i[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=o+"px";s=i[e+"ScrollbarMaxScroll"]+(i[e+"ScrollbarIndicatorSize"]-o)}else s=i[e+"ScrollbarMaxScroll"];i[e+"ScrollbarWrapper"].style[n+"TransitionDelay"]="0";i[e+"ScrollbarWrapper"].style.opacity=r&&i.options.hideScrollbar?"0":"1";i[e+"ScrollbarIndicator"].style[n+"Transform"]=b+(e=="h"?s+"px,0":"0,"+s+"px")+w},_start:function(t){var r=this,i=a?t.touches[0]:t,s,o,u,f,l;if(!r.enabled)return;r.options.onBeforeScrollStart&&r.options.onBeforeScrollStart.call(r,t);(r.options.useTransition||r.options.zoom)&&r._transitionTime(0);r.moved=!1;r.animating=!1;r.zoomed=!1;r.distX=0;r.distY=0;r.absDistX=0;r.absDistY=0;r.dirX=0;r.dirY=0;if(r.options.zoom&&a&&t.touches.length>1){f=e.abs(t.touches[0].pageX-t.touches[1].pageX);l=e.abs(t.touches[0].pageY-t.touches[1].pageY);r.touchesDistStart=e.sqrt(f*f+l*l);r.originX=e.abs(t.touches[0].pageX+t.touches[1].pageX-r.wrapperOffsetLeft*2)/2-r.x;r.originY=e.abs(t.touches[0].pageY+t.touches[1].pageY-r.wrapperOffsetTop*2)/2-r.y;r.options.onZoomStart&&r.options.onZoomStart.call(r,t)}if(r.options.momentum){if(r.options.useTransform){s=getComputedStyle(r.scroller,null)[n+"Transform"].replace(/[^0-9-.,]/g,"").split(",");o=s[4]*1;u=s[5]*1}else{o=getComputedStyle(r.scroller,null).left.replace(/[^0-9-]/g,"")*1;u=getComputedStyle(r.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(o!=r.x||u!=r.y){r.options.useTransition?r._unbind("webkitTransitionEnd"):h(r.aniTime);r.steps=[];r._pos(o,u)}}r.absStartX=r.x;r.absStartY=r.y;r.startX=r.x;r.startY=r.y;r.pointX=i.pageX;r.pointY=i.pageY;r.startTime=t.timeStamp||Date.now();r.options.onScrollStart&&r.options.onScrollStart.call(r,t);r._bind(v);r._bind(m);r._bind(g)},_move:function(t){var r=this,i=a?t.touches[0]:t,s=i.pageX-r.pointX,o=i.pageY-r.pointY,u=r.x+s,f=r.y+o,l,c,h,p=t.timeStamp||Date.now();r.options.onBeforeScrollMove&&r.options.onBeforeScrollMove.call(r,t);if(r.options.zoom&&a&&t.touches.length>1){l=e.abs(t.touches[0].pageX-t.touches[1].pageX);c=e.abs(t.touches[0].pageY-t.touches[1].pageY);r.touchesDist=e.sqrt(l*l+c*c);r.zoomed=!0;h=1/r.touchesDistStart*r.touchesDist*this.scale;h<r.options.zoomMin?h=.5*r.options.zoomMin*Math.pow(2,h/r.options.zoomMin):h>r.options.zoomMax&&(h=2*r.options.zoomMax*Math.pow(.5,r.options.zoomMax/h));r.lastScale=h/this.scale;u=this.originX-this.originX*r.lastScale+this.x,f=this.originY-this.originY*r.lastScale+this.y;this.scroller.style[n+"Transform"]=b+u+"px,"+f+"px"+w+" scale("+h+")";r.options.onZoom&&r.options.onZoom.call(r,t);return}r.pointX=i.pageX;r.pointY=i.pageY;if(u>0||u<r.maxScrollX)u=r.options.bounce?r.x+s/2:u>=0||r.maxScrollX>=0?0:r.maxScrollX;if(f>r.minScrollY||f<r.maxScrollY)f=r.options.bounce?r.y+o/2:f>=r.minScrollY||r.maxScrollY>=0?r.minScrollY:r.maxScrollY;r.distX+=s;r.distY+=o;r.absDistX=e.abs(r.distX);r.absDistY=e.abs(r.distY);if(r.absDistX<6&&r.absDistY<6)return;if(r.options.lockDirection)if(r.absDistX>r.absDistY+5){f=r.y;o=0}else if(r.absDistY>r.absDistX+5){u=r.x;s=0}r.moved=!0;r._pos(u,f);r.dirX=s>0?-1:s<0?1:0;r.dirY=o>0?-1:o<0?1:0;if(p-r.startTime>300){r.startTime=p;r.startX=r.x;r.startY=r.y}r.options.onScrollMove&&r.options.onScrollMove.call(r,t)},_end:function(r){if(a&&r.touches.length!=0)return;var i=this,s=a?r.changedTouches[0]:r,o,u,f={dist:0,time:0},l={dist:0,time:0},c=(r.timeStamp||Date.now())-i.startTime,h=i.x,p=i.y,d,y,E,S,x;i._unbind(v);i._unbind(m);i._unbind(g);i.options.onBeforeScrollEnd&&i.options.onBeforeScrollEnd.call(i,r);if(i.zoomed){x=i.scale*i.lastScale;x=Math.max(i.options.zoomMin,x);x=Math.min(i.options.zoomMax,x);i.lastScale=x/i.scale;i.scale=x;i.x=i.originX-i.originX*i.lastScale+i.x;i.y=i.originY-i.originY*i.lastScale+i.y;i.scroller.style[n+"TransitionDuration"]="200ms";i.scroller.style[n+"Transform"]=b+i.x+"px,"+i.y+"px"+w+" scale("+i.scale+")";i.zoomed=!1;i.refresh();i.options.onZoomEnd&&i.options.onZoomEnd.call(i,r);return}if(!i.moved){if(a)if(i.doubleTapTimer&&i.options.zoom){clearTimeout(i.doubleTapTimer);i.doubleTapTimer=null;i.options.onZoomStart&&i.options.onZoomStart.call(i,r);i.zoom(i.pointX,i.pointY,i.scale==1?i.options.doubleTapZoom:1);i.options.onZoomEnd&&setTimeout(function(){i.options.onZoomEnd.call(i,r)},200)}else i.doubleTapTimer=setTimeout(function(){i.doubleTapTimer=null;o=s.target;while(o.nodeType!=1)o=o.parentNode;if(o.tagName!="SELECT"&&o.tagName!="INPUT"&&o.tagName!="TEXTAREA"){u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,r.view,1,s.screenX,s.screenY,s.clientX,s.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null);u._fake=!0;o.dispatchEvent(u)}},i.options.zoom?250:0);i._resetPos(200);i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}if(c<300&&i.options.momentum){f=h?i._momentum(h-i.startX,c,-i.x,i.scrollerW-i.wrapperW+i.x,i.options.bounce?i.wrapperW:0):f;l=p?i._momentum(p-i.startY,c,-i.y,i.maxScrollY<0?i.scrollerH-i.wrapperH+i.y-i.minScrollY:0,i.options.bounce?i.wrapperH:0):l;h=i.x+f.dist;p=i.y+l.dist;if(i.x>0&&h>0||i.x<i.maxScrollX&&h<i.maxScrollX)f={dist:0,time:0};if(i.y>i.minScrollY&&p>i.minScrollY||i.y<i.maxScrollY&&p<i.maxScrollY)l={dist:0,time:0}}if(f.dist||l.dist){E=e.max(e.max(f.time,l.time),10);if(i.options.snap){d=h-i.absStartX;y=p-i.absStartY;if(e.abs(d)<i.options.snapThreshold&&e.abs(y)<i.options.snapThreshold)i.scrollTo(i.absStartX,i.absStartY,200);else{S=i._snap(h,p);h=S.x;p=S.y;E=e.max(S.time,E)}}i.scrollTo(t(h),t(p),E);i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}if(i.options.snap){d=h-i.absStartX;y=p-i.absStartY;if(e.abs(d)<i.options.snapThreshold&&e.abs(y)<i.options.snapThreshold)i.scrollTo(i.absStartX,i.absStartY,200);else{S=i._snap(i.x,i.y);(S.x!=i.x||S.y!=i.y)&&i.scrollTo(S.x,S.y,S.time)}i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}i._resetPos(200);i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r)},_resetPos:function(e){var t=this,r=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,i=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;if(r==t.x&&i==t.y){if(t.moved){t.moved=!1;t.options.onScrollEnd&&t.options.onScrollEnd.call(t)}if(t.hScrollbar&&t.options.hideScrollbar){n=="webkit"&&(t.hScrollbarWrapper.style[n+"TransitionDelay"]="300ms");t.hScrollbarWrapper.style.opacity="0"}if(t.vScrollbar&&t.options.hideScrollbar){n=="webkit"&&(t.vScrollbarWrapper.style[n+"TransitionDelay"]="300ms");t.vScrollbarWrapper.style.opacity="0"}return}t.scrollTo(r,i,e||0)},_wheel:function(e){var t=this,n,r,i,s,o;if("wheelDeltaX"in e){n=e.wheelDeltaX/12;r=e.wheelDeltaY/12}else if("wheelDelta"in e)n=r=e.wheelDelta/12;else{if(!("detail"in e))return;n=r=-e.detail*3}if(t.options.wheelAction=="zoom"){o=t.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0));o<t.options.zoomMin&&(o=t.options.zoomMin);o>t.options.zoomMax&&(o=t.options.zoomMax);if(o!=t.scale){!t.wheelZoomCount&&t.options.onZoomStart&&t.options.onZoomStart.call(t,e);t.wheelZoomCount++;t.zoom(e.pageX,e.pageY,o,400);setTimeout(function(){t.wheelZoomCount--;!t.wheelZoomCount&&t.options.onZoomEnd&&t.options.onZoomEnd.call(t,e)},400)}return}i=t.x+n;s=t.y+r;i>0?i=0:i<t.maxScrollX&&(i=t.maxScrollX);s>t.minScrollY?s=t.minScrollY:s<t.maxScrollY&&(s=t.maxScrollY);t.scrollTo(i,s,0)},_mouseout:function(e){var t=e.relatedTarget;if(!t){this._end(e);return}while(t=t.parentNode)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind("webkitTransitionEnd");t._startAni()},_startAni:function(){var t=this,n=t.x,r=t.y,i=Date.now(),s,o,u;if(t.animating)return;if(!t.steps.length){t._resetPos(400);return}s=t.steps.shift();s.x==n&&s.y==r&&(s.time=0);t.animating=!0;t.moved=!0;if(t.options.useTransition){t._transitionTime(s.time);t._pos(s.x,s.y);t.animating=!1;s.time?t._bind("webkitTransitionEnd"):t._resetPos(0);return}u=function(){var a=Date.now(),f,l;if(a>=i+s.time){t._pos(s.x,s.y);t.animating=!1;t.options.onAnimationEnd&&t.options.onAnimationEnd.call(t);t._startAni();return}a=(a-i)/s.time-1;o=e.sqrt(1-a*a);f=(s.x-n)*o+n;l=(s.y-r)*o+r;t._pos(f,l);t.animating&&(t.aniTime=c(u))};u()},_transitionTime:function(e){e+="ms";this.scroller.style[n+"TransitionDuration"]=e;this.hScrollbar&&(this.hScrollbarIndicator.style[n+"TransitionDuration"]=e);this.vScrollbar&&(this.vScrollbarIndicator.style[n+"TransitionDuration"]=e)},_momentum:function(n,r,i,s,o){var u=6e-4,a=e.abs(n)/r,f=a*a/(2*u),l=0,c=0;if(n>0&&f>i){c=o/(6/(f/a*u));i+=c;a=a*i/f;f=i}else if(n<0&&f>s){c=o/(6/(f/a*u));s+=c;a=a*s/f;f=s}f*=n<0?-1:1;l=a/u;return{dist:f,time:t(l)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent){t-=e.offsetLeft;n-=e.offsetTop}if(e!=this.wrapper){t*=this.scale;n*=this.scale}return{left:t,top:n}},_snap:function(n,r){var i=this,s,o,u,a,f,l;u=i.pagesX.length-1;for(s=0,o=i.pagesX.length;s<o;s++)if(n>=i.pagesX[s]){u=s;break}u==i.currPageX&&u>0&&i.dirX<0&&u--;n=i.pagesX[u];f=e.abs(n-i.pagesX[i.currPageX]);f=f?e.abs(i.x-n)/f*500:0;i.currPageX=u;u=i.pagesY.length-1;for(s=0;s<u;s++)if(r>=i.pagesY[s]){u=s;break}u==i.currPageY&&u>0&&i.dirY<0&&u--;r=i.pagesY[u];l=e.abs(r-i.pagesY[i.currPageY]);l=l?e.abs(i.y-r)/l*500:0;i.currPageY=u;a=t(e.max(f,l))||200;return{x:n,y:r,time:a}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var e=this;e.scroller.style[n+"Transform"]="";e.hScrollbar=!1;e.vScrollbar=!1;e._scrollbar("h");e._scrollbar("v");e._unbind(p,window);e._unbind(d);e._unbind(v);e._unbind(m);e._unbind(g);if(!e.options.hasTouch){e._unbind("mouseout",e.wrapper);e._unbind(y)}e.options.useTransition&&e._unbind("webkitTransitionEnd");e.options.checkDOMChanges&&clearInterval(e.checkDOMTime);e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var e=this,r,i,s,o,u=0,a=0;e.scale<e.options.zoomMin&&(e.scale=e.options.zoomMin);e.wrapperW=e.wrapper.clientWidth||1;e.wrapperH=e.wrapper.clientHeight||1;e.minScrollY=-e.options.topOffset||0;e.scrollerW=t(e.scroller.offsetWidth*e.scale);e.scrollerH=t((e.scroller.offsetHeight+e.minScrollY)*e.scale);e.maxScrollX=e.wrapperW-e.scrollerW;e.maxScrollY=e.wrapperH-e.scrollerH+e.minScrollY;e.dirX=0;e.dirY=0;e.options.onRefresh&&e.options.onRefresh.call(e);e.hScroll=e.options.hScroll&&e.maxScrollX<0;e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH);e.hScrollbar=e.hScroll&&e.options.hScrollbar;e.vScrollbar=e.vScroll&&e.options.vScrollbar&&e.scrollerH>e.wrapperH;r=e._offset(e.wrapper);e.wrapperOffsetLeft=-r.left;e.wrapperOffsetTop=-r.top;if(typeof e.options.snap=="string"){e.pagesX=[];e.pagesY=[];o=e.scroller.querySelectorAll(e.options.snap);for(i=0,s=o.length;i<s;i++){u=e._offset(o[i]);u.left+=e.wrapperOffsetLeft;u.top+=e.wrapperOffsetTop;e.pagesX[i]=u.left<e.maxScrollX?e.maxScrollX:u.left*e.scale;e.pagesY[i]=u.top<e.maxScrollY?e.maxScrollY:u.top*e.scale}}else if(e.options.snap){e.pagesX=[];while(u>=e.maxScrollX){e.pagesX[a]=u;u-=e.wrapperW;a++}e.maxScrollX%e.wrapperW&&(e.pagesX[e.pagesX.length]=e.maxScrollX-e.pagesX[e.pagesX.length-1]+e.pagesX[e.pagesX.length-1]);u=0;a=0;e.pagesY=[];while(u>=e.maxScrollY){e.pagesY[a]=u;u-=e.wrapperH;a++}e.maxScrollY%e.wrapperH&&(e.pagesY[e.pagesY.length]=e.maxScrollY-e.pagesY[e.pagesY.length-1]+e.pagesY[e.pagesY.length-1])}e._scrollbar("h");e._scrollbar("v");if(!e.zoomed){e.scroller.style[n+"TransitionDuration"]="0";e._resetPos(200)}},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop();s.length||(s=[{x:e,y:t,time:n,relative:r}]);for(o=0,u=s.length;o<u;o++){if(s[o].relative){s[o].x=i.x-s[o].x;s[o].y=i.y-s[o].y}i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0})}i._startAni()},scrollToElement:function(t,n){var r=this,i;t=t.nodeType?t:r.scroller.querySelector(t);if(!t)return;i=r._offset(t);i.left+=r.wrapperOffsetLeft;i.top+=r.wrapperOffsetTop;i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left;i.top=i.top>r.minScrollY?r.minScrollY:i.top<r.maxScrollY?r.maxScrollY:i.top;n=n===undefined?e.max(e.abs(i.left)*2,e.abs(i.top)*2):n;r.scrollTo(i.left,i.top,n)},scrollToPage:function(e,t,n){var r=this,i,s;n=n===undefined?400:n;r.options.onScrollStart&&r.options.onScrollStart.call(r);if(r.options.snap){e=e=="next"?r.currPageX+1:e=="prev"?r.currPageX-1:e;t=t=="next"?r.currPageY+1:t=="prev"?r.currPageY-1:t;e=e<0?0:e>r.pagesX.length-1?r.pagesX.length-1:e;t=t<0?0:t>r.pagesY.length-1?r.pagesY.length-1:t;r.currPageX=e;r.currPageY=t;i=r.pagesX[e];s=r.pagesY[t]}else{i=-r.wrapperW*e;s=-r.wrapperH*t;i<r.maxScrollX&&(i=r.maxScrollX);s<r.maxScrollY&&(s=r.maxScrollY)}r.scrollTo(i,s,n)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(v);this._unbind(m);this._unbind(g)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):h(this.aniTime);this.steps=[];this.moved=!1;this.animating=!1},zoom:function(e,t,r,i){var s=this,o=r/s.scale;if(!s.options.useTransform)return;s.zoomed=!0;i=i===undefined?200:i;e=e-s.wrapperOffsetLeft-s.x;t=t-s.wrapperOffsetTop-s.y;s.x=e-e*o+s.x;s.y=t-t*o+s.y;s.scale=r;s.refresh();s.x=s.x>0?0:s.x<s.maxScrollX?s.maxScrollX:s.x;s.y=s.y>s.minScrollY?s.minScrollY:s.y<s.maxScrollY?s.maxScrollY:s.y;s.scroller.style[n+"TransitionDuration"]=i+"ms";s.scroller.style[n+"Transform"]=b+s.x+"px,"+s.y+"px"+w+" scale("+r+")";s.zoomed=!1},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};typeof exports!="undefined"?exports.iScroll=E:window.iScroll=E})();var minplayer=minplayer||{};minplayer.compatibility=function(){var e=null;e=document.createElement("video");this.videoOGG=checkPlayType(e,"video/ogg");this.videoH264=checkPlayType(e,["video/mp4","video/h264"]);this.videoWEBM=checkPlayType(e,["video/x-webm","video/webm","application/octet-stream"]);e=document.createElement("audio");this.audioOGG=checkPlayType(e,"audio/ogg");this.audioMP3=checkPlayType(e,"audio/mpeg");this.audioMP4=checkPlayType(e,"audio/mp4")};if(!minplayer.playTypes){minplayer.playTypes=new minplayer.compatibility;minplayer.isAndroid=/android/gi.test(navigator.appVersion);minplayer.isIDevice=/iphone|ipad/gi.test(navigator.appVersion);minplayer.isPlaybook=/playbook/gi.test(navigator.appVersion);minplayer.isTouchPad=/hp-tablet/gi.test(navigator.appVersion);minplayer.hasTouch="ontouchstart"in window&&!minplayer.isTouchPad}var minplayer=minplayer||{};minplayer.async=function(){this.value=null;this.queue=[]};minplayer.async.prototype.get=function(e,t){this.value!==null?e(this.value):this.queue.push(e)};minplayer.async.prototype.set=function(e){this.value=e;var t=this.queue.length;if(t){while(t--)this.queue[t](e);this.queue=[]}};var minplayer=minplayer||{};minplayer.flags=function(){this.flag=0;this.ids={};this.numFlags=0};minplayer.flags.prototype.setFlag=function(e,t){if(!this.ids.hasOwnProperty(e)){this.ids[e]=this.numFlags;this.numFlags++}t?this.flag|=1<<this.ids[e]:this.flag&=~(1<<this.ids[e])};minplayer=minplayer||{};minplayer.plugins=minplayer.plugins||{};minplayer.queue=minplayer.queue||[];minplayer.lock=!1;minplayer.plugin=function(e,t,n,r){this.name=e;this.pluginReady=!1;this.options=n||{};this.queue=r||{};this.triggered={};this.lock=!1;if(t){this.context=jQuery(t);this.construct()}};minplayer.plugin.prototype.construct=function(){this.addPlugin()};minplayer.plugin.prototype.destroy=function(){this.unbind()};minplayer.plugin.prototype.create=function(e,t,n){var r=null;t=t||"minplayer";window[t][e]||(t="minplayer");n=n||this.display;if(window[t][e]){r=window[t][e];r[this.options.template]&&(r=r[this.options.template]);typeof r!="function"&&(r=window.minplayer[e]);if(typeof r=="function")return new r(n,this.options)}return null};minplayer.plugin.prototype.ready=function(){if(!this.pluginReady){this.pluginReady=!0;this.trigger("ready");this.checkQueue()}};minplayer.plugin.prototype.isValid=function(){return!!this.options.id};minplayer.plugin.prototype.addPlugin=function(e,t){e=e||this.name;t=t||this;if(t.isValid()){minplayer.plugins[this.options.id]||(minplayer.plugins[this.options.id]={});minplayer.plugins[this.options.id][e]||(minplayer.plugins[this.options.id][e]=[]);minplayer.plugins[this.options.id][e].push(t);this.checkQueue(t)}};minplayer.plugin.prototype.poll=function(e,t){setTimeout(function(n){return function r(){e.call(n)&&setTimeout(r,t)}}(this),t)};minplayer.plugin.prototype.get=function(e,t){if(typeof e=="function"){t=e;e=null}return minplayer.get.call(this,this.options.id,e,t)};minplayer.plugin.prototype.checkQueue=function(e){var t=null,n=0,r=!1,i=[];e=e||this;minplayer.lock=!0;var s=minplayer.queue.length;for(n=0;n<s;n++)if(minplayer.queue.hasOwnProperty(n)){t=minplayer.queue[n];r=!t.id&&!t.plugin;r|=t.plugin==e.name;r&=!t.id||t.id==this.options.id;r&&(r=minplayer.bind.call(t.context,t.event,this.options.id,e.name,t.callback));r||i.push(t)}minplayer.queue=i;minplayer.lock=!1};minplayer.plugin.prototype.trigger=function(e,t){this.triggered[e]=t;if(this.queue.hasOwnProperty(e)){var n=0,r={},i=this.queue[e];for(n in i)if(i.hasOwnProperty(n)){r=i[n];r.callback({target:this,data:r.data},t)}}return this};minplayer.plugin.prototype.bind=function(e,t,n){if(typeof t=="function"){n=t;t=null}if(!e||!n)return;this.queue[e]=this.queue[e]||[];this.unbind(e,n);this.queue[e].push({callback:n,data:t});this.triggered.hasOwnProperty(e)&&n({target:this,data:t},this.triggered[e]);return this};minplayer.plugin.prototype.unbind=function(e,t){this.lock&&setTimeout(function(n){return function(){n.unbind(e,t)}}(this),10);this.lock=!0;var n=this.queue.hasOwnProperty(e)?this.queue[e]:null;if(!e)this.queue={};else if(!t)this.queue[e]=[];else if(n){var r=0,i={};for(r in n)if(n.hasOwnProperty(r)&&n[r].callback===t){i=this.queue[e].splice(1,1);delete i}}this.lock=!1;return this};minplayer.addQueue=function(e,t,n,r,i){minplayer.lock?setTimeout(function(){minplayer.addQueue(e,n,t,r,i)},10):minplayer.queue.push({context:e,id:n,event:t,plugin:r,callback:i})};minplayer.bind=function(e,t,n,r){if(!r)return!1;var i=minplayer.plugins,s=[],o=function(e,t){if(i.hasOwnProperty(e)&&i[e].hasOwnProperty(t)){var n=i[e][t].length;while(n--)s.push(i[e][t][n])}};if(t&&n)o(t,n);else if(!t&&n)for(var t in i)o(t,n);else if(t&&!n&&i[t])for(var n in i[t])o(t,n);else if(!t&&!n)for(var t in i)for(var n in i[t])o(t,n);var u=s.length;while(u--)s[u].bind(e,function(e){return function(t){r.call(e,t.target)}}(this));s.length==0&&minplayer.addQueue(this,e,t,n,r);return s.length>0};minplayer.get=function(e,t,n){if(typeof e=="function"){n=e;t=e=null}if(typeof t=="function"){n=t;t=e;e=null}n=typeof n=="function"?n:null;if(n){minplayer.bind.call(this,"ready",e,t,n);return}var r=minplayer.plugins;if(!e&&!t&&!n)return r;if(e&&!t&&!n)return r[e];if(e&&t&&!n)return r[e][t];if(!e&&t&&!n){var i=[];for(var e in r)if(r.hasOwnProperty(e)&&r[e].hasOwnProperty(t)){var s=r[e][t].length;while(s--)i.push(r[e][t][s])}return i}};minplayer=minplayer||{};minplayer.display=function(e,t,n,r){minplayer.plugin.call(this,e,t,n,r)};minplayer.display.prototype=new minplayer.plugin;minplayer.display.prototype.constructor=minplayer.display;minplayer.display.prototype.getDisplay=function(){return this.context};minplayer.display.prototype.construct=function(){this.display=this.getDisplay(this.context,this.options);minplayer.plugin.prototype.construct.call(this);this.elements=this.getElements();if(this.onResize){var e=0;jQuery(window).resize(function(t){return function(){clearTimeout(e);e=setTimeout(function(){t.onResize()},200)}}(this))}};minplayer.display.prototype.onResize=!1;minplayer.display.prototype.hide=function(e){e=e||this.display;if(e){e.forceHide=!0;e.unbind().hide()}};minplayer.display.prototype.fullScreenElement=function(){return this.display};minplayer.click=function(e,t){var n=!1;e=jQuery(e);e.bind("touchstart click",function(e){if(!n){n=!0;setTimeout(function(){n=!1},100);t.call(this,e)}});return e};minplayer.display.prototype.onFocus=function(e){this.hasFocus=this.focus=e};minplayer.showThenHide=function(e,t,n){if(!e)return;t=t||5e3;if(!e.showTimer){e.shown=!0;minplayer.click(document,function(){minplayer.showThenHide(e,t,n)});jQuery(document).bind("mousemove",function(){minplayer.showThenHide(e,t,n)})}clearTimeout(e.showTimer);if(!e.shown&&!e.forceHide){e.shown=!0;e.show();n&&n(!0)}e.showTimer=setTimeout(function(){e.hide("slow",function(){e.shown=!1;n&&n(!1)})},t)};minplayer.display.prototype.fullscreen=function(e){var t=this.isFullScreen(),n=this.fullScreenElement();if(t&&!e){n.removeClass("fullscreen");screenfull&&screenfull.exit();this.trigger("fullscreen",!1)}else if(!t&&e){n.addClass("fullscreen");if(screenfull){screenfull.request(n[0]);screenfull.onchange=function(e){return function(t){screenfull.isFullscreen||e.fullscreen(!1)}}(this)}this.trigger("fullscreen",!0)}};minplayer.display.prototype.toggleFullScreen=function(){this.fullscreen(!this.isFullScreen())};minplayer.display.prototype.isFullScreen=function(){return this.fullScreenElement().hasClass("fullscreen")};minplayer.display.prototype.getScaledRect=function(e,t){var n={};n.x=t.x?t.x:0;n.y=t.y?t.y:0;n.width=t.width?t.width:0;n.height=t.height?t.height:0;if(e){if(t.width/t.height>e){n.height=t.height;n.width=Math.floor(t.height*e)}else{n.height=Math.floor(t.width/e);n.width=t.width}n.x=Math.floor((t.width-n.width)/2);n.y=Math.floor((t.height-n.height)/2)}return n};minplayer.display.prototype.getElements=function(){return{}};(function(e,t){"use strict";var n=function(){var e=[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreen","fullscreenElement"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement"]];for(var n=0,r=e.length;n<r;n++)if(e.hasOwnProperty(n)){var i=e[n];if(i[1]in t)return i}}();if(!n)return e.screenfull=!1;var r="ALLOW_KEYBOARD_INPUT"in Element,i={init:function(){t.addEventListener(n[2],function(e){i.isFullscreen=t[n[3]];i.element=t[n[4]];i.onchange(e)});return this},isFullscreen:t[n[3]],element:t[n[4]],request:function(e){e=e||t.documentElement;e[n[0]](r&&Element.ALLOW_KEYBOARD_INPUT);t.isFullscreen||e[n[0]]()},exit:function(){t[n[1]]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){}};e.screenfull=i.init()})(window,document);jQuery.fn.minplayer||(jQuery.fn.minplayer=function(e){return jQuery(this).each(function(){e=e||{};e.id=e.id||jQuery(this).attr("id")||Math.random();if(!minplayer.plugins[e.id]){e.template=e.template||"default";minplayer[e.template]?new minplayer[e.template](jQuery(this),e):new minplayer(jQuery(this),e)}})});minplayer=jQuery.extend(function(e,t){minplayer.display.call(this,"player",e,t)},minplayer);minplayer.prototype=new minplayer.display;minplayer.prototype.constructor=minplayer;minplayer.prototype.construct=function(){jQuery.each(this.context[0].attributes,function(e){return function(t,n){e.options[n.name]=e.options[n.name]||n.value}}(this));this.options=jQuery.extend({id:"player",build:!1,wmode:"transparent",preload:!0,autoplay:!1,autoload:!0,loop:!1,width:"100%",height:"350px",debug:!1,volume:80,files:null,file:"",preview:"",attributes:{},logo:"",link:"",width:"100%",height:"100%"},this.options);minplayer.display.prototype.construct.call(this);this.controller=this.create("controller");this.playLoader=this.create("playLoader");minplayer.click(document,function(e){return function(t){var n=jQuery(t.target),r=n.closest("#"+e.options.id).length!=0;minplayer.get.call(this,e.options.id,null,function(e){e.onFocus(r)})}}(this));if(this.options.logo&&this.elements.logo){var e="";this.options.link&&(e+='<a target="_blank" href="'+this.options.link+'">');e+='<img src="'+this.options.logo+'" >';this.options.link&&(e+="</a>");this.logo=this.elements.logo.append(e)}this.currentPlayer="html5";this.addKeyEvents();this.load(this.getFiles());this.ready()};minplayer.prototype.addEvents=function(){minplayer.get.call(this,this.options.id,null,function(e){return function(t){t.bind("error",function(t,n){if(e.currentPlayer=="html5"){e.options.file.player="minplayer";e.loadPlayer()}else e.error(n)});t.bind("fullscreen",function(t,n){e.resize()})}}(this))};minplayer.prototype.error=function(e){e=e||"";if(this.elements.error){this.elements.error.text(e);e?this.elements.error.show():this.elements.error.hide()}};minplayer.prototype.addKeyEvents=function(){jQuery(document).bind("keydown",function(e){return function(t){switch(t.keyCode){case 113:case 27:e.isFullScreen()&&e.fullscreen(!1)}}}(this))};minplayer.prototype.getFiles=function(){if(this.options.files)return this.options.files;if(this.options.file)return this.options.file;var e=[],t=null;if(this.elements.media){t=this.elements.media.attr("src");t&&e.push({path:t});jQuery("source",this.elements.media).each(function(){e.push({path:jQuery(this).attr("src"),mimetype:jQuery(this).attr("type"),codecs:jQuery(this).attr("codecs")})})}return e};minplayer.prototype.getMediaFile=function(e){if(!e)return null;if(typeof e=="string")return new minplayer.file({path:e});if(e.path||e.id)return new minplayer.file(e);var t=e.length,n=0,r=null,i=null;while(t--){i=e[t];typeof i=="string"?i=new minplayer.file({path:i}):i=new minplayer.file(i);i.priority>n&&(r=i)}return r};minplayer.prototype.loadPlayer=function(){if(!this.options.file||this.elements.display.length==0)return;if(!this.options.file.player){this.error("Cannot play media: "+this.options.file.mimetype);return}this.error();var e=this.options.file.player.toString();if(!this.media||e!==this.currentPlayer){this.currentPlayer=e;if(!this.elements.display){this.error("No media display found.");return}var t={};if(this.media){t=this.media.queue;
this.media.destroy()}pClass=minplayer.players[this.options.file.player];this.options.mediaelement=this.elements.media;this.media=new pClass(this.elements.display,this.options,t);this.get("media",function(e){return function(t){t.load(e.options.file)}}(this))}else this.media&&this.media.load(this.options.file)};minplayer.prototype.load=function(e){var t="",n="";this.options.files=e||this.options.files;this.options.file=this.getMediaFile(this.options.files);this.loadPlayer();this.addEvents()};minplayer.prototype.resize=function(){this.get(function(e){e.onResize&&e.onResize()})};var minplayer=minplayer||{};minplayer.image=function(e,t){this.loaded=!1;this.loader=null;this.ratio=0;this.img=null;minplayer.display.call(this,"image",e,t)};minplayer.image.prototype=new minplayer.display;minplayer.image.prototype.constructor=minplayer.image;minplayer.image.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.display.css("overflow","hidden");this.loader=new Image;this.loader.onload=function(e){return function(){e.loaded=!0;e.ratio=e.loader.width/e.loader.height;e.resize();e.trigger("loaded")}}(this);this.ready()};minplayer.image.prototype.load=function(e){this.clear(function(){this.display.empty();this.img=jQuery(document.createElement("img")).attr({src:""}).hide();this.display.append(this.img);this.loader.src=e;this.img.attr("src",e)})};minplayer.image.prototype.clear=function(e){this.loaded=!1;this.img?this.img.fadeOut(function(t){return function(){t.img.attr("src","");t.loader.src="";jQuery(this).remove();e.call(t)}}(this)):e.call(this)};minplayer.image.prototype.resize=function(e,t){e=e||this.display.width();t=t||this.display.height();if(e&&t&&this.loaded){var n=this.getScaledRect(this.ratio,{width:e,height:t});this.img&&this.img.attr("src",this.loader.src).css({marginLeft:n.x,marginTop:n.y,width:n.width,height:n.height});this.img.fadeIn()}};minplayer.image.prototype.onResize=function(){this.resize()};var minplayer=minplayer||{};minplayer.file=function(e){this.duration=e.duration||0;this.bytesTotal=e.bytesTotal||0;this.quality=e.quality||0;this.stream=e.stream||"";this.path=e.path||"";this.codecs=e.codecs||"";this.extension=e.extension||this.getFileExtension();this.mimetype=e.mimetype||e.filemime||this.getMimeType();this.type=e.type||this.getType();if(!this.type){this.mimetype=this.getMimeType();this.type=this.getType()}this.player=e.player||this.getBestPlayer();this.priority=e.priority||this.getPriority();this.id=e.id||this.getId();this.path||(this.path=this.id)};minplayer.file.prototype.getBestPlayer=function(){var e=null,t=0;jQuery.each(minplayer.players,function(n){return function(r,i){var s=i.getPriority();if(i.canPlay(n)&&s>t){e=r;t=s}}}(this));return e};minplayer.file.prototype.getPriority=function(){var e=1;this.player&&(e=minplayer.players[this.player].getPriority());switch(this.mimetype){case"video/x-webm":case"video/webm":case"application/octet-stream":return e*10;case"video/mp4":case"audio/mp4":case"audio/mpeg":return e*9;case"video/ogg":case"audio/ogg":case"video/quicktime":return e*8;default:return e*5}};minplayer.file.prototype.getFileExtension=function(){return this.path.substring(this.path.lastIndexOf(".")+1).toLowerCase()};minplayer.file.prototype.getMimeType=function(){switch(this.extension){case"mp4":case"m4v":case"flv":case"f4v":return"video/mp4";case"webm":return"video/webm";case"ogg":case"ogv":return"video/ogg";case"3g2":return"video/3gpp2";case"3gpp":case"3gp":return"video/3gpp";case"mov":return"video/quicktime";case"swf":return"application/x-shockwave-flash";case"oga":return"audio/ogg";case"mp3":return"audio/mpeg";case"m4a":case"f4a":return"audio/mp4";case"aac":return"audio/aac";case"wav":return"audio/vnd.wave";case"wma":return"audio/x-ms-wma";default:return"unknown"}};minplayer.file.prototype.getType=function(){var e=this.mimetype.match(/([^\/]+)(\/)/);e=e&&e.length>1?e[1]:"";return e=="video"||this.mimetype=="application/octet-stream"?"video":e=="audio"?"audio":""};minplayer.file.prototype.getId=function(){var e=minplayer.players[this.player];return e&&e.getMediaId?e.getMediaId(this):""};var minplayer=minplayer||{};minplayer.playLoader=function(e,t){this.busy=new minplayer.flags;this.bigPlay=new minplayer.flags;this.preview=null;this.enabled=!0;minplayer.display.call(this,"playLoader",e,t)};minplayer.playLoader.prototype=new minplayer.display;minplayer.playLoader.prototype.constructor=minplayer.playLoader;minplayer.playLoader.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.get("media",function(e){if(!e.hasPlayLoader()){this.enabled=!0;this.options.preview||(this.options.preview=e.elements.media.attr("poster"));e.elements.media.attr("poster","");this.loadPreview();this.elements.bigPlay&&minplayer.click(this.elements.bigPlay.unbind(),function(t){t.preventDefault();jQuery(this).hide();e.play()});e.unbind("loadstart").bind("loadstart",function(e){return function(t){e.busy.setFlag("media",!0);e.bigPlay.setFlag("media",!0);e.preview&&e.elements.preview.show();e.checkVisibility()}}(this));e.bind("waiting",function(e){return function(t){e.busy.setFlag("media",!0);e.checkVisibility()}}(this));e.bind("loadeddata",function(e){return function(t){e.busy.setFlag("media",!1);e.checkVisibility()}}(this));e.bind("playing",function(e){return function(t){e.busy.setFlag("media",!1);e.bigPlay.setFlag("media",!1);e.preview&&e.elements.preview.hide();e.checkVisibility()}}(this));e.bind("pause",function(e){return function(t){e.bigPlay.setFlag("media",!0);e.checkVisibility()}}(this))}else{this.enabled=!1;this.hide(this.elements.busy);this.hide(this.elements.bigPlay);this.hide()}});this.ready()};minplayer.playLoader.prototype.loadPreview=function(){if(!this.enabled)return;if(this.elements.preview)if(this.options.preview){this.elements.preview.addClass("has-preview").show();this.preview=new minplayer.image(this.elements.preview,this.options);this.preview.load(this.options.preview)}else this.elements.preview.hide()};minplayer.playLoader.prototype.checkVisibility=function(){if(!this.enabled)return;this.busy.flag?this.elements.busy.show():this.elements.busy.hide();this.bigPlay.flag?this.elements.bigPlay.show():this.elements.bigPlay.hide();(this.bigPlay.flag||this.busy.flag)&&this.display.show();!this.bigPlay.flag&&!this.busy.flag&&this.display.hide()};var minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.base=function(e,t,n){minplayer.display.call(this,"media",e,t,n)};minplayer.players.base.prototype=new minplayer.display;minplayer.players.base.prototype.constructor=minplayer.players.base;minplayer.players.base.prototype.getElements=function(){var e=minplayer.display.prototype.getElements.call(this);return jQuery.extend(e,{media:this.options.mediaelement})};minplayer.players.base.getPriority=function(){return 0};minplayer.players.base.getMediaId=function(e){return""};minplayer.players.base.canPlay=function(e){return!1};minplayer.players.base.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.mediaFile=this.options.file;this.clear();this.playerFound()||this.addPlayer();this.player=this.getPlayer();minplayer.click(this.display,function(e){return function(){e.playing&&e.pause()}}(this));jQuery(document).bind("keydown",function(e){return function(t){if(e.hasFocus){t.preventDefault();switch(t.keyCode){case 32:case 179:e.playing?e.pause():e.play();break;case 38:e.setVolumeRelative(.1);break;case 40:e.setVolumeRelative(-0.1);break;case 37:case 227:e.seekRelative(-0.05);break;case 39:case 228:e.seekRelative(.05)}}}}(this))};minplayer.players.base.prototype.addPlayer=function(){this.elements.media&&this.elements.media.remove();this.elements.media=jQuery(this.create());this.display.html(this.elements.media)};minplayer.players.base.prototype.destroy=function(){minplayer.plugin.prototype.destroy.call(this);this.clear()};minplayer.players.base.prototype.clear=function(){this.playerReady=!1;this.reset();this.player&&jQuery(this.player).unbind()};minplayer.players.base.prototype.reset=function(){this.duration=new minplayer.async;this.currentTime=new minplayer.async;this.bytesLoaded=new minplayer.async;this.bytesTotal=new minplayer.async;this.bytesStart=new minplayer.async;this.volume=new minplayer.async;this.hasFocus=!1;this.playing=!1;this.loading=!1;this.trigger("pause");this.trigger("waiting");this.trigger("progress",{loaded:0,total:0,start:0});this.trigger("timeupdate",{currentTime:0,duration:0})};minplayer.players.base.prototype.onReady=function(){if(this.playerReady)return;this.playerReady=!0;this.setVolume(this.options.volume/100);this.loading=!0;this.poll(function(e){return function(){e.loading&&e.getBytesLoaded(function(t){e.getBytesTotal(function(n){if(t||n){var r=0;e.getBytesStart(function(e){r=e});e.trigger("progress",{loaded:t,total:n,start:r});t>=n&&(e.loading=!1)}})});return e.loading}}(this),1e3);this.ready();this.trigger("loadstart")};minplayer.players.base.prototype.onPlaying=function(){this.trigger("playing");this.hasFocus=!0;this.playing=!0;this.poll(function(e){return function(){e.playing&&e.getCurrentTime(function(t){e.getDuration(function(n){t=parseFloat(t);n=parseFloat(n);(t||n)&&e.trigger("timeupdate",{currentTime:t,duration:n})})});return e.playing}}(this),1e3)};minplayer.players.base.prototype.onPaused=function(){this.trigger("pause");this.hasFocus=!1;this.playing=!1};minplayer.players.base.prototype.onComplete=function(){this.playing=!1;this.loading=!1;this.hasFocus=!1;this.trigger("ended")};minplayer.players.base.prototype.onLoaded=function(){this.options.autoplay&&this.play();this.trigger("loadeddata")};minplayer.players.base.prototype.onWaiting=function(){this.trigger("waiting")};minplayer.players.base.prototype.onError=function(e){this.hasFocus=!1;this.trigger("error",e)};minplayer.players.base.prototype.isReady=function(){return this.player&&this.playerReady};minplayer.players.base.prototype.hasPlayLoader=function(){return!1};minplayer.players.base.prototype.hasController=function(){return!1};minplayer.players.base.prototype.playerFound=function(){return!1};minplayer.players.base.prototype.create=function(){this.reset();return null};minplayer.players.base.prototype.getPlayer=function(){return this.player};minplayer.players.base.prototype.load=function(e){var t=typeof this.mediaFile=="string",n=t?this.mediaFile:this.mediaFile.path;if(e&&this.isReady()&&e.path!=n){this.reset();this.mediaFile=e;return!0}return!1};minplayer.players.base.prototype.play=function(){return this.isReady()};minplayer.players.base.prototype.pause=function(){return this.isReady()};minplayer.players.base.prototype.stop=function(){this.playing=!1;this.loading=!1;this.hasFocus=!1;return this.isReady()};minplayer.players.base.prototype.seekRelative=function(e){this.getCurrentTime(function(t){return function(n){t.getDuration(function(r){if(r){var i=0;e>-1&&e<1?i=(n/r+parseFloat(e))*r:i=n+parseFloat(e);t.seek(i)}})}}(this))};minplayer.players.base.prototype.seek=function(e){return this.isReady()};minplayer.players.base.prototype.getValue=function(e,t){if(this.isReady()){var n=this.player[e]();n!==undefined&&n!==null&&t(n)}};minplayer.players.base.prototype.setVolumeRelative=function(e){this.getVolume(function(t){return function(n){n+=parseFloat(e);n=n<0?0:n;n=n>1?1:n;t.setVolume(n)}}(this))};minplayer.players.base.prototype.setVolume=function(e){this.trigger("volumeupdate",e);return this.isReady()};minplayer.players.base.prototype.getVolume=function(e){return this.volume.get(e)};minplayer.players.base.prototype.getCurrentTime=function(e){return this.currentTime.get(e)};minplayer.players.base.prototype.getDuration=function(e){return this.duration.get(e)};minplayer.players.base.prototype.getBytesStart=function(e){return this.bytesStart.get(e)};minplayer.players.base.prototype.getBytesLoaded=function(e){return this.bytesLoaded.get(e)};minplayer.players.base.prototype.getBytesTotal=function(e){return this.bytesTotal.get(e)};var minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.html5=function(e,t,n){minplayer.players.base.call(this,e,t,n)};minplayer.players.html5.prototype=new minplayer.players.base;minplayer.players.html5.prototype.constructor=minplayer.players.html5;minplayer.players.html5.getPriority=function(){return 10};minplayer.players.html5.canPlay=function(e){switch(e.mimetype){case"video/ogg":return!!minplayer.playTypes.videoOGG;case"video/mp4":case"video/x-mp4":case"video/m4v":case"video/x-m4v":return!!minplayer.playTypes.videoH264;case"video/x-webm":case"video/webm":case"application/octet-stream":return!!minplayer.playTypes.videoWEBM;case"audio/ogg":return!!minplayer.playTypes.audioOGG;case"audio/mpeg":return!!minplayer.playTypes.audioMP3;case"audio/mp4":return!!minplayer.playTypes.audioMP4;default:return!1}};minplayer.players.html5.prototype.construct=function(){minplayer.players.base.prototype.construct.call(this);this.addEvents()};minplayer.players.html5.prototype.addEvents=function(){if(this.player){jQuery(this.player).unbind();this.player.addEventListener("abort",function(e){return function(){e.trigger("abort")}}(this),!1);this.player.addEventListener("loadstart",function(e){return function(){e.onReady()}}(this),!1);this.player.addEventListener("loadeddata",function(e){return function(){e.onLoaded()}}(this),!1);this.player.addEventListener("loadedmetadata",function(e){return function(){e.onLoaded()}}(this),!1);this.player.addEventListener("canplaythrough",function(e){return function(){e.onLoaded()}}(this),!1);this.player.addEventListener("ended",function(e){return function(){e.onComplete()}}(this),!1);this.player.addEventListener("pause",function(e){return function(){e.onPaused()}}(this),!1);this.player.addEventListener("play",function(e){return function(){e.onPlaying()}}(this),!1);this.player.addEventListener("playing",function(e){return function(){e.onPlaying()}}(this),!1);this.player.addEventListener("error",function(e){return function(){e.trigger("error","An error occured - "+this.error.code)}}(this),!1);this.player.addEventListener("waiting",function(e){return function(){e.onWaiting()}}(this),!1);this.player.addEventListener("durationchange",function(e){return function(){e.duration.set(this.duration);e.trigger("durationchange",{duration:this.duration})}}(this),!1);this.player.addEventListener("progress",function(e){return function(t){e.bytesTotal.set(t.total);e.bytesLoaded.set(t.loaded)}}(this),!1);return!0}return!1};minplayer.players.html5.prototype.onReady=function(){minplayer.players.base.prototype.onReady.call(this);minplayer.isAndroid&&this.onLoaded();if(minplayer.isIDevice){this.play();setTimeout(function(e){return function(){e.pause();e.onLoaded()}}(this),1)}};minplayer.players.html5.prototype.playerFound=function(){return this.display.find(this.mediaFile.type).length>0};minplayer.players.html5.prototype.create=function(){minplayer.players.base.prototype.create.call(this);var e=jQuery(document.createElement(this.mediaFile.type)).attr(this.options.attributes).append(jQuery(document.createElement("source")).attr({src:this.mediaFile.path}));e.eq(0)[0].setAttribute("width","100%");e.eq(0)[0].setAttribute("height","100%");e.eq(0)[0].setAttribute("autobuffer",!0);var t=this.options.autoload?"auto":"metadata";t=minplayer.isIDevice?"metadata":t;e.eq(0)[0].setAttribute("preload",t);return e};minplayer.players.html5.prototype.getPlayer=function(){return this.elements.media.eq(0)[0]};minplayer.players.html5.prototype.load=function(e){if(minplayer.players.base.prototype.load.call(this,e)){var t=this.elements.media.attr("src");t||(t=jQuery("source",this.elements.media).eq(0).attr("src"));if(t!=e.path){this.addPlayer();this.player=this.getPlayer();this.addEvents();var n='<source src="'+e.path+'"></source>';this.elements.media.removeAttr("src").empty().html(n);return!0}}return!1};minplayer.players.html5.prototype.play=function(){if(minplayer.players.base.prototype.play.call(this)){this.player.play();return!0}return!1};minplayer.players.html5.prototype.pause=function(){if(minplayer.players.base.prototype.pause.call(this)){this.player.pause();return!0}return!1};minplayer.players.html5.prototype.stop=function(){if(minplayer.players.base.prototype.stop.call(this)){this.player.pause();this.player.src="";return!0}return!1};minplayer.players.html5.prototype.seek=function(e){if(minplayer.players.base.prototype.seek.call(this,e)){this.player.currentTime=e;return!0}return!1};minplayer.players.html5.prototype.setVolume=function(e){if(minplayer.players.base.prototype.setVolume.call(this,e)){this.player.volume=e;return!0}return!1};minplayer.players.html5.prototype.getVolume=function(e){this.isReady()&&e(this.player.volume)};minplayer.players.html5.prototype.getDuration=function(e){this.isReady()&&e(this.player.duration)};minplayer.players.html5.prototype.getCurrentTime=function(e){this.isReady()&&e(this.player.currentTime)};minplayer.players.html5.prototype.getBytesLoaded=function(e){if(this.isReady()){var t=0;this.bytesLoaded.value?t=this.bytesLoaded.value:this.player.buffered&&this.player.buffered.length>0&&this.player.buffered.end&&this.player.duration?t=this.player.buffered.end(0):this.player.bytesTotal!=undefined&&this.player.bytesTotal>0&&this.player.bufferedBytes!=undefined&&(t=this.player.bufferedBytes);e(t)}};minplayer.players.html5.prototype.getBytesTotal=function(e){if(this.isReady()){var t=0;this.bytesTotal.value?t=this.bytesTotal.value:this.player.buffered&&this.player.buffered.length>0&&this.player.buffered.end&&this.player.duration?t=this.player.duration:this.player.bytesTotal!=undefined&&this.player.bytesTotal>0&&this.player.bufferedBytes!=undefined&&(t=this.player.bytesTotal);e(t)}};var minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.flash=function(e,t,n){minplayer.players.base.call(this,e,t,n)};minplayer.players.flash.prototype=new minplayer.players.base;minplayer.players.flash.prototype.constructor=minplayer.players.flash;minplayer.players.flash.getPriority=function(){return 0};minplayer.players.flash.canPlay=function(e){return!1};minplayer.players.flash.getFlash=function(e){var t=window.location.protocol;t.charAt(t.length-1)==":"&&(t=t.substring(0,t.length-1));var n=jQuery.param(e.flashvars),r=t+"://fpdownload.macromedia.com";r+="/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0";var i='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ';i+='codebase="'+r+'" ';i+='playerType="flash" ';i+='width="'+e.width+'" ';i+='height="'+e.height+'" ';i+='id="'+e.id+'" ';i+='name="'+e.id+'"> ';i+='<param name="allowScriptAccess" value="always"></param>';i+='<param name="allowfullscreen" value="true" />';i+='<param name="movie" value="'+e.swf+'"></param>';i+='<param name="wmode" value="'+e.wmode+'"></param>';i+='<param name="quality" value="high"></param>';i+='<param name="FlashVars" value="'+n+'"></param>';i+='<embed src="'+e.swf+'" ';i+='quality="high" ';i+='width="'+e.width+'" height="'+e.height+'" ';i+='id="'+e.id+'" name="'+e.id+'" ';i+='swLiveConnect="true" allowScriptAccess="always" ';i+='wmode="'+e.wmode+'"';i+='allowfullscreen="true" type="application/x-shockwave-flash" ';i+='FlashVars="'+n+'" ';i+='pluginspage="'+t;i+='://www.macromedia.com/go/getflashplayer" />';i+="</object>";return i};minplayer.players.flash.prototype.playerFound=function(){return this.display.find('object[playerType="flash"]').length>0};minplayer.players.flash.prototype.getPlayer=function(){var e=jQuery.browser.msie?"object":"embed";return jQuery(e,this.display).eq(0)[0]};var minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.minplayer=function(e,t,n){minplayer.players.flash.call(this,e,t,n)};minplayer.players.minplayer.prototype=new minplayer.players.flash;minplayer.players.minplayer.prototype.constructor=minplayer.players.minplayer;window.onFlashPlayerReady=function(e){var t=minplayer.get(e,"media"),n=t.length;while(n--)t[n].onReady()};window.onFlashPlayerUpdate=function(e,t){var n=minplayer.get(e,"media"),r=n.length;while(r--)n[r].onMediaUpdate(t)};window.onFlashPlayerDebug=function(e){console&&console.log&&console.log(e)};minplayer.players.minplayer.getPriority=function(){return 1};minplayer.players.minplayer.canPlay=function(e){return e.type=="video"||e.type=="audio"};minplayer.players.minplayer.prototype.create=function(){this.options=jQuery.extend({swfplayer:"flash/minplayer.swf"},this.options);minplayer.players.flash.prototype.create.call(this);var e={id:this.options.id,debug:this.options.debug,config:"nocontrols",file:this.mediaFile.path,autostart:this.options.autoplay,autoload:this.options.autoload};return minplayer.players.flash.getFlash({swf:this.options.swfplayer,id:this.options.id+"_player",width:"100%",height:"100%",flashvars:e,wmode:this.options.wmode})};minplayer.players.minplayer.prototype.onMediaUpdate=function(e){switch(e){case"mediaMeta":this.onLoaded();break;case"mediaPlaying":this.minplayerloaded&&this.onPlaying();break;case"mediaPaused":this.minplayerloaded=!0;this.onPaused();break;case"mediaComplete":this.onComplete()}};minplayer.players.minplayer.prototype.clear=function(){minplayer.players.flash.prototype.clear.call(this);this.minplayerloaded=this.options.autoplay};minplayer.players.minplayer.prototype.load=function(e){if(minplayer.players.flash.prototype.load.call(this,e)){this.player.loadMedia(e.path,e.stream);return!0}return!1};minplayer.players.minplayer.prototype.play=function(){if(minplayer.players.flash.prototype.play.call(this)){this.player.playMedia();return!0}return!1};minplayer.players.minplayer.prototype.pause=function(){if(minplayer.players.flash.prototype.pause.call(this)){this.player.pauseMedia();return!0}return!1};minplayer.players.minplayer.prototype.stop=function(){if(minplayer.players.flash.prototype.stop.call(this)){this.player.stopMedia();return!0}return!1};minplayer.players.minplayer.prototype.seek=function(e){if(minplayer.players.flash.prototype.seek.call(this,e)){this.player.seekMedia(e);return!0}return!1};minplayer.players.minplayer.prototype.setVolume=function(e){if(minplayer.players.flash.prototype.setVolume.call(this,e)){this.player.setVolume(e);return!0}return!1};minplayer.players.minplayer.prototype.getVolume=function(e){this.isReady()&&e(this.player.getVolume())};minplayer.players.minplayer.prototype.getDuration=function(e){if(this.isReady()){var t=this.player.getDuration();t?e(t):this.poll(function(n){return function(){t=n.player.getDuration();t&&e(t);return!t}}(this),1e3)}};minplayer.players.minplayer.prototype.getCurrentTime=function(e){this.isReady()&&e(this.player.getCurrentTime())};minplayer.players.minplayer.prototype.getBytesLoaded=function(e){this.isReady()&&e(this.player.getMediaBytesLoaded())};minplayer.players.minplayer.prototype.getBytesTotal=function(e){this.isReady()&&e(this.player.getMediaBytesTotal())};var minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.youtube=function(e,t,n){this.quality="default";minplayer.players.base.call(this,e,t,n)};minplayer.players.youtube.prototype=new minplayer.players.base;minplayer.players.youtube.prototype.constructor=minplayer.players.youtube;minplayer.players.youtube.getPriority=function(){return 10};minplayer.players.youtube.canPlay=function(e){return e.mimetype==="video/youtube"?!0:e.path.search(/^http(s)?\:\/\/(www\.)?youtube\.com/i)===0};minplayer.players.youtube.getMediaId=function(e){var t=/^http[s]?\:\/\/(www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_\-]+)/i;return e.path.search(t)===0?e.path.match(t)[2]:e.path};minplayer.players.youtube.prototype.setPlayerState=function(e){switch(e){case YT.PlayerState.CUED:break;case YT.PlayerState.BUFFERING:this.onWaiting();break;case YT.PlayerState.PAUSED:this.onPaused();break;case YT.PlayerState.PLAYING:this.onPlaying();break;case YT.PlayerState.ENDED:this.onComplete();break;default:}};minplayer.players.youtube.prototype.onReady=function(e){minplayer.players.base.prototype.onReady.call(this);this.options.autoplay||this.pause();this.onLoaded()};minplayer.players.youtube.prototype.playerFound=function(){var e=this.display.find("iframe#"+this.options.id+"-player");return e.length>0};minplayer.players.youtube.prototype.onPlayerStateChange=function(e){this.setPlayerState(e.data)};minplayer.players.youtube.prototype.onQualityChange=function(e){this.quality=e.data};minplayer.players.youtube.prototype.hasPlayLoader=function(){return!0};minplayer.players.youtube.prototype.hasController=function(){return minplayer.isIDevice};minplayer.players.youtube.prototype.create=function(){minplayer.players.base.prototype.create.call(this);var e=document.createElement("script");e.src="https://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);this.playerId=this.options.id+"-player";this.poll(function(e){return function(){var t=jQuery("#"+e.playerId).length>0;t=t&&window.hasOwnProperty("YT");t=t&&typeof YT.Player=="function";if(t){var n=location.protocol;n+="//"+location.hostname;n+=location.port&&":"+location.port;var r={};minplayer.isIDevice?r.origin=n:r={enablejsapi:minplayer.isIDevice?0:1,origin:n,wmode:"opaque",controls:minplayer.isAndroid?1:0};e.player=new YT.Player(e.playerId,{height:"100%",width:"100%",frameborder:0,videoId:e.mediaFile.id,playerVars:r,events:{onReady:function(t){e.onReady(t)},onStateChange:function(t){e.onPlayerStateChange(t)},onPlaybackQualityChange:function(t){e.onQualityChange(t)},onError:function(t){e.onError(t)}}})}return!t}}(this),200);return jQuery(document.createElement("div")).attr({id:this.playerId})};minplayer.players.youtube.prototype.load=function(e){if(minplayer.players.base.prototype.load.call(this,e)){this.player.loadVideoById(e.id,0,this.quality);return!0}return!1};minplayer.players.youtube.prototype.play=function(){if(minplayer.players.base.prototype.play.call(this)){this.player.playVideo();return!0}return!1};minplayer.players.youtube.prototype.pause=function(){if(minplayer.players.base.prototype.pause.call(this)){this.player.pauseVideo();return!0}return!1};minplayer.players.youtube.prototype.stop=function(){if(minplayer.players.base.prototype.stop.call(this)){this.player.stopVideo();return!0}return!1};minplayer.players.youtube.prototype.seek=function(e){if(minplayer.players.base.prototype.seek.call(this,e)){this.player.seekTo(e,!0);return!0}return!1};minplayer.players.youtube.prototype.setVolume=function(e){if(minplayer.players.base.prototype.setVolume.call(this,e)){this.player.setVolume(e*100);return!0}return!1};minplayer.players.youtube.prototype.getVolume=function(e){this.getValue("getVolume",e)};minplayer.players.youtube.prototype.getDuration=function(e){this.getValue("getDuration",e)};minplayer.players.youtube.prototype.getCurrentTime=function(e){this.getValue("getCurrentTime",e)};minplayer.players.youtube.prototype.getBytesStart=function(e){this.getValue("getVideoStartBytes",e)};minplayer.players.youtube.prototype.getBytesLoaded=function(e){this.getValue("getVideoBytesLoaded",e)};minplayer.players.youtube.prototype.getBytesTotal=function(e){this.getValue("getVideoBytesTotal",e)};var minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.vimeo=function(e,t,n){minplayer.players.base.call(this,e,t,n)};minplayer.players.vimeo.prototype=new minplayer.players.base;minplayer.players.vimeo.prototype.constructor=minplayer.players.vimeo;minplayer.players.vimeo.getPriority=function(){return 10};minplayer.players.vimeo.canPlay=function(e){return e.mimetype==="video/vimeo"?!0:e.path.search(/^http(s)?\:\/\/(www\.)?vimeo\.com/i)===0};minplayer.players.vimeo.prototype.hasPlayLoader=function(){return minplayer.hasTouch};minplayer.players.vimeo.prototype.hasController=function(){return minplayer.hasTouch};minplayer.players.vimeo.getMediaId=function(e){var t=/^http[s]?\:\/\/(www\.)?vimeo\.com\/(\?v\=)?([0-9]+)/i;return e.path.search(t)===0?e.path.match(t)[3]:e.path};minplayer.players.vimeo.prototype.reset=function(){minplayer.players.base.prototype.reset.call(this)};minplayer.players.vimeo.prototype.create=function(){minplayer.players.base.prototype.create.call(this);var e=document.createElement("script");e.src="http://a.vimeocdn.com/js/froogaloop2.min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);var n=document.createElement("iframe");n.setAttribute("id",this.options.id+"-player");n.setAttribute("type","text/html");n.setAttribute("width","100%");n.setAttribute("height","100%");n.setAttribute("frameborder","0");var r="http://player.vimeo.com/video/";r+=this.mediaFile.id+"?";r+=jQuery.param({wmode:"opaque",api:1,player_id:this.options.id+"-player",title:0,byline:0,portrait:0,autoplay:this.options.autoplay,loop:this.options.loop});n.setAttribute("src",r);this.poll(function(e){return function(){if(window.Froogaloop){e.player=window.Froogaloop(n);var t=0;e.player.addEvent("ready",function(){clearTimeout(t);e.onReady();e.onError("")});t=setTimeout(function(){e.onReady();e.onError("Unable to play video.")},2e3)}return!window.Froogaloop}}(this),200);this.trigger("loadstart");return n};minplayer.players.vimeo.prototype.onReady=function(e){this.player.addEvent("loadProgress",function(e){return function(t){e.duration.set(parseFloat(t.duration));e.bytesLoaded.set(t.bytesLoaded);e.bytesTotal.set(t.bytesTotal)}}(this));this.player.addEvent("playProgress",function(e){return function(t){e.duration.set(parseFloat(t.duration));e.currentTime.set(parseFloat(t.seconds))}}(this));this.player.addEvent("play",function(e){return function(){e.onPlaying()}}(this));this.player.addEvent("pause",function(e){return function(){e.onPaused()}}(this));this.player.addEvent("finish",function(e){return function(){e.onComplete()}}(this));minplayer.players.base.prototype.onReady.call(this);this.onLoaded()};minplayer.players.vimeo.prototype.playerFound=function(){var e=this.display.find("iframe#"+this.options.id+"-player");return e.length>0};minplayer.players.vimeo.prototype.play=function(){if(minplayer.players.base.prototype.play.call(this)){this.player.api("play");return!0}return!1};minplayer.players.vimeo.prototype.pause=function(){if(minplayer.players.base.prototype.pause.call(this)){this.player.api("pause");return!0}return!1};minplayer.players.vimeo.prototype.stop=function(){if(minplayer.players.base.prototype.stop.call(this)){this.player.api("unload");return!0}return!1};minplayer.players.vimeo.prototype.seek=function(e){if(minplayer.players.base.prototype.seek.call(this,e)){this.player.api("seekTo",e);return!0}return!1};minplayer.players.vimeo.prototype.setVolume=function(e){if(minplayer.players.base.prototype.setVolume.call(this,e)){this.volume.set(e);this.player.api("setVolume",e);return!0}return!1};minplayer.players.vimeo.prototype.getVolume=function(e){this.player.api("getVolume",function(t){e(t)})};minplayer.players.vimeo.prototype.getDuration=function(e){this.isReady()&&(this.duration.value?e(this.duration.value):this.player.api("getDuration",function(t){e(t)}))};var minplayer=minplayer||{};minplayer.controller=function(e,t){minplayer.display.call(this,"controller",e,t)};minplayer.controller.prototype=new minplayer.display;minplayer.controller.prototype.constructor=minplayer.controller;minplayer.formatTime=function(e){e=e||0;var t=0,n=0,r=0,i="";r=Math.floor(e/3600);e-=r*3600;n=Math.floor(e/60);e-=n*60;t=Math.floor(e%60);if(r){i+=String(r);i+=":"}i+=n>=10?String(n):"0"+String(n);i+=":";i+=t>=10?String(t):"0"+String(t);return{time:i,units:""}};minplayer.controller.prototype.getElements=function(){var e=minplayer.display.prototype.getElements.call(this);return jQuery.extend(e,{play:null,pause:null,fullscreen:null,seek:null,progress:null,volume:null,timer:null})};minplayer.controller.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.dragging=!1;this.vol=0;this.elements.seek&&(this.seekBar=this.elements.seek.slider({range:"min",create:function(e,t){jQuery(".ui-slider-range",e.target).addClass("ui-state-active")}}));this.elements.volume&&(this.volumeBar=this.elements.volume.slider({range:"min",orientation:"vertical"}));this.get("player",function(e){this.elements.fullscreen&&minplayer.click(this.elements.fullscreen.unbind(),function(){e.toggleFullScreen()}).css({pointer:"hand"})});this.get("media",function(e){if(!e.hasController()){if(this.elements.pause){minplayer.click(this.elements.pause.unbind(),function(t){return function(n){n.preventDefault();t.playPause(!1,e)}}(this));e.bind("pause",function(e){return function(t){e.setPlayPause(!0)}}(this))}if(this.elements.play){minplayer.click(this.elements.play.unbind(),function(t){return function(n){n.preventDefault();t.playPause(!0,e)}}(this));e.bind("playing",function(e){return function(t){e.setPlayPause(!1)}}(this))}if(this.elements.duration){e.bind("durationchange",function(e){
return function(t,n){e.setTimeString("duration",n.duration)}}(this));e.getDuration(function(e){return function(t){e.setTimeString("duration",t)}}(this))}this.elements.progress&&e.bind("progress",function(e){return function(t,n){var r=n.total?n.loaded/n.total*100:0;e.elements.progress.width(r+"%")}}(this));(this.seekBar||this.elements.timer)&&e.bind("timeupdate",function(e){return function(t,n){if(!e.dragging){var r=0;n.duration&&(r=n.currentTime/n.duration*100);e.seekBar&&e.seekBar.slider("option","value",r);e.setTimeString("timer",n.currentTime)}}}(this));this.seekBar&&this.seekBar.slider({start:function(e){return function(t,n){e.dragging=!0}}(this),stop:function(t){return function(n,r){t.dragging=!1;e.getDuration(function(t){e.seek(r.value/100*t)})}}(this),slide:function(t){return function(n,r){e.getDuration(function(n){var i=r.value/100*n;t.dragging||e.seek(i);t.setTimeString("timer",i)})}}(this)});this.elements.mute&&minplayer.click(this.elements.mute,function(t){return function(n){n.preventDefault();var r=t.volumeBar.slider("option","value");if(r>0){t.vol=r;t.volumeBar.slider("option","value",0);e.setVolume(0)}else{t.volumeBar.slider("option","value",t.vol);e.setVolume(t.vol/100)}}}(this));if(this.volumeBar){this.volumeBar.slider({slide:function(t,n){e.setVolume(n.value/100)}});e.bind("volumeupdate",function(e){return function(t,n){e.volumeBar.slider("option","value",n*100)}}(this));e.getVolume(function(e){return function(t){e.volumeBar.slider("option","value",t*100)}}(this))}}else this.hide()});this.ready()};minplayer.controller.prototype.setPlayPause=function(e){var t="";if(this.elements.play){t=e?"inherit":"none";this.elements.play.css("display",t)}if(this.elements.pause){t=e?"none":"inherit";this.elements.pause.css("display",t)}};minplayer.controller.prototype.playPause=function(e,t){var n=e?"play":"pause";this.display.trigger(n);this.setPlayPause(!e);t&&t[n]()};minplayer.controller.prototype.setTimeString=function(e,t){this.elements[e]&&this.elements[e].text(minplayer.formatTime(t).time)};jQuery.fn.osmplayer||(jQuery.fn.osmplayer=function(e){return jQuery(this).each(function(){e=e||{};e.id=e.id||jQuery(this).attr("id")||Math.random();if(!minplayer.plugins[e.id]){e.template=e.template||"default";osmplayer[e.template]?new osmplayer[e.template](jQuery(this),e):new osmplayer(jQuery(this),e)}})});osmplayer=function(e,t){minplayer.call(this,e,t)};osmplayer.prototype=new minplayer;osmplayer.prototype.constructor=osmplayer;osmplayer.prototype.create=function(e,t,n){return minplayer.prototype.create.call(this,e,"osmplayer",n)};osmplayer.prototype.construct=function(){this.options=jQuery.extend({playlist:"",node:{},swfplayer:"minplayer/flash/minplayer.swf",logo:"logo.png",link:"http://www.mediafront.org"},this.options);minplayer.prototype.construct.call(this);this.playQueue=[];this.playIndex=0;this.create("playlist","osmplayer");this.get("playlist",function(e){e.bind("nodeLoad",function(e){return function(t,n){e.loadNode(n)}}(this))});this.options.node&&this.loadNode(this.options.node)};osmplayer.prototype.fullScreenElement=function(){return this.elements.minplayer};osmplayer.prototype.loadNode=function(e){if(e&&e.mediafiles){var t=e.mediafiles.media;if(t){this.playQueue.length=0;this.playQueue=[];this.playIndex=0;this.addToQueue(t.intro);this.addToQueue(t.commercial);this.addToQueue(t.prereel);this.addToQueue(t.media);this.addToQueue(t.postreel)}this.options.preview=osmplayer.getImage(e.mediafiles.image,"preview");this.playLoader&&this.playLoader.loadPreview();this.playNext()}};osmplayer.prototype.addToQueue=function(e){e&&this.playQueue.push(this.getFile(e))};osmplayer.prototype.getFile=function(e){if(e){var t=typeof e;(t==="object"||t==="array")&&e[0]&&(e=this.getBestMedia(e))}return e};osmplayer.prototype.getBestMedia=function(e){var t=null,n=e.length;while(n--){var r=new minplayer.file(e[n]);if(!t||r.priority>t.priority)t=r}return t};osmplayer.prototype.playNext=function(){if(this.playQueue.length>this.playIndex){this.load(this.playQueue[this.playIndex]);this.playIndex++}else if(this.options.repeat){this.playIndex=0;this.playNext()}else{this.options.autostart=!1;this.playIndex=0;this.playNext()}};osmplayer.getImage=function(e,t){var n="";if(e)if(e[t])n=e[t];else if(e.image)n=e.image;else for(t in e)if(e.hasOwnProperty(t)){n=e[t];break}return typeof n=="string"?n:n.path};var osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser["default"]={priority:1,valid:function(e){return!0},getType:function(e){return"json"},getFeed:function(e,t,n){e=e.replace(/(.*)\??(.*)/i,"$1");e+="?start-index="+t;e+="&max-results="+n;return e},parse:function(e){return e}};var osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser.youtube={priority:10,valid:function(e){return e.search(/^http(s)?\:\/\/gdata\.youtube\.com/i)===0},getType:function(e){return"jsonp"},getFeed:function(e,t,n){e=e.replace(/(.*)\??(.*)/i,"$1");e+="?start-index="+(t+1);e+="&max-results="+n;e+="&v=2&alt=jsonc";return e},parse:function(e){e=e.data;var t={total_rows:e.totalItems,nodes:[]};for(var n in e.items)if(e.items.hasOwnProperty(n)){var r=e.items[n];t.nodes.push({title:r.title,description:r.description,mediafiles:{image:{thumbnail:{path:r.thumbnail.sqDefault},image:{path:r.thumbnail.hqDefault}},media:{media:{player:"youtube",id:r.id}}}})}return t}};var osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser.rss={priority:8,valid:function(e){e=e.replace(/(.*)\??(.*)/i,"$1");return e.match(/\.rss$/i)!==null},getType:function(e){return"xml"},getFeed:function(e,t,n){return e},parse:function(e){var t={total_rows:0,nodes:[]};jQuery("rss channel",e).find("item").each(function(e){osmplayer.parser.rss.addRSSItem(t,jQuery(this))});return t},addRSSItem:function(e,t){e.total_rows++;e.nodes.push({title:t.find("title").text(),description:t.find("annotation").text(),mediafiles:{image:{image:{path:t.find("image").text()}},media:{media:{path:t.find("location").text()}}}})}};var osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser.asx={priority:8,valid:function(e){e=e.replace(/(.*)\??(.*)/i,"$1");return e.match(/\.asx$/i)!==null},getType:function(e){return"xml"},getFeed:function(e,t,n){return e},parse:function(e){var t={total_rows:0,nodes:[]};jQuery("asx entry",e).each(function(e){osmplayer.parser.rss.addRSSItem(t,jQuery(this))});return t}};var osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser.xsfp={priority:8,valid:function(e){e=e.replace(/(.*)\??(.*)/i,"$1");return e.match(/\.xml$/i)!==null},getType:function(e){return"xml"},getFeed:function(e,t,n){return e},parse:function(e){var t={total_rows:0,nodes:[]};jQuery("playlist trackList track",e).each(function(e){osmplayer.parser.rss.addRSSItem(t,jQuery(this))});return t}};var osmplayer=osmplayer||{};osmplayer.playlist=function(e,t){minplayer.display.call(this,"playlist",e,t)};osmplayer.playlist.prototype=new minplayer.display;osmplayer.playlist.prototype.constructor=osmplayer.playlist;osmplayer.playlist.prototype.construct=function(){this.options=jQuery.extend({vertical:!0,playlist:"",pageLimit:10,autoNext:!0,shuffle:!1,loop:!1,hysteresis:40,scrollSpeed:20,scrollMode:"auto"},this.options);minplayer.display.prototype.construct.call(this);this.nodes=[];this.page=-1;this.totalItems=0;this.currentItem=-1;this.playqueue=[];this.playqueuepos=0;this.playlist=this.options.playlist;this.scroll=null;if(this.elements.scroll&&this.elements.scroll.length>0){var e={};e.pos=this.options.vertical?"y":"x";e.pagePos=this.options.vertical?"pageY":"pageX";e.offset=this.options.vertical?"top":"left";e.wrapperSize=this.options.vertical?"wrapperH":"wrapperW";e.minScroll=this.options.vertical?"minScrollY":"minScrollX";e.maxScroll=this.options.vertical?"maxScrollY":"maxScrollX";this.scroll=new iScroll(this.elements.scroll.eq(0)[0],{hScroll:!this.options.vertical,hScrollbar:!this.options.vertical,vScroll:this.options.vertical,vScrollbar:this.options.vertical,hideScrollbar:!0});this.options.scrollMode=="auto"&&!minplayer.hasTouch&&this.elements.list.bind("mousemove",function(t){return function(n){n.preventDefault();t.mousePos=n[e.pagePos];t.mousePos-=t.display.offset()[e.offset]}}(this)).bind("mouseenter",function(t){return function(n){n.preventDefault();t.scrolling=!0;var r=function(){if(t.scrolling){var n=t.scroll[e.wrapperSize],i=n/2,s=t.mousePos-i;if(Math.abs(s)>t.options.hysteresis){var o=t.options.hysteresis;o*=s>0?-1:0;s=t.options.scrollSpeed*(s+o);s/=i;var u=t.scroll[e.pos]-s,a=t.scroll[e.minScroll]||0,f=t.scroll[e.maxScroll];u>=a?t.scrollTo(a):u<=f?t.scrollTo(f):t.scrollTo(s,!0)}setTimeout(r,30)}};r()}}(this)).bind("mouseleave",function(e){return function(t){t.preventDefault();e.scrolling=!1}}(this))}this.pager=this.create("pager","osmplayer");this.pager.bind("nextPage",function(e){return function(t){e.nextPage()}}(this));this.pager.bind("prevPage",function(e){return function(t){e.prevPage()}}(this));this.options.autoNext&&this.get("media",function(e){e.bind("ended",function(t){return function(n){e.options.autoplay=!0;t.next()}}(this))});this.next();this.ready()};osmplayer.playlist.prototype.scrollTo=function(e,t){if(this.scroll){this.scroll.options.hideScrollbar=!1;this.options.vertical?this.scroll.scrollTo(0,e,0,t):this.scroll.scrollTo(e,0,0,t);this.scroll.options.hideScrollbar=!0}};osmplayer.playlist.prototype.refresh=function(){if(this.scroll){if(!this.options.vertical){var e=0;jQuery.each(this.elements.list.children(),function(){e+=jQuery(this).outerWidth()});this.elements.list.width(e)}this.scroll.refresh();this.scroll.scrollTo(0,0,200)}};osmplayer.playlist.prototype.set=function(e,t){if(typeof e!="object"){this.trigger("error","Playlist must be an object to set");return}if(!e.hasOwnProperty("total_rows")){this.trigger("error","Unknown playlist format.");return}if(e.total_rows&&e.nodes.length){this.totalItems=e.total_rows;this.currentItem=0;(this.page+1)*this.options.pageLimit>=this.totalItems?this.pager.nextPage.hide():this.pager.nextPage.show();var n=null,r=e.nodes.length;this.elements.list.empty();this.nodes=[];for(var i=0;i<r;i++){n=this.create("teaser","osmplayer",this.elements.list);n.setNode(e.nodes[i]);n.bind("nodeLoad",function(e,t){return function(n,r){e.loadItem(t)}}(this,i));this.nodes.push(n);t===i&&this.loadItem(i)}this.refresh();this.trigger("playlistLoad",e)}this.elements.playlist_busy&&this.elements.playlist_busy.hide()};osmplayer.playlist.prototype.setQueue=function(){this.playqueue.push({page:this.page,item:this.currentItem});this.playqueuepos=this.playqueue.length};osmplayer.playlist.prototype.next=function(){var e=0,t=this.page;if(this.playqueuepos>=this.playqueue.length)if(this.options.shuffle){e=Math.floor(Math.random()*this.totalItems);t=Math.floor(e/this.options.pageLimit);e%=this.options.pageLimit;this.load(t,e)}else{e=this.currentItem+1;e>=this.nodes.length?this.load(t+1,0):this.loadItem(e)}else{this.playqueuepos=this.playqueuepos+1;var n=this.playqueue[this.playqueuepos];this.load(n.page,n.item)}};osmplayer.playlist.prototype.prev=function(){this.playqueuepos=this.playqueuepos-1;this.playqueuepos=this.playqueuepos<0?0:this.playqueuepos;var e=this.playqueue[this.playqueuepos];e&&this.load(e.page,e.item)};osmplayer.playlist.prototype.loadItem=function(e){if(e<this.nodes.length){this.setQueue();var t=this.nodes[this.currentItem];t.select(!1);this.currentItem=e;t=this.nodes[e];t.select(!0);this.trigger("nodeLoad",t.node)}};osmplayer.playlist.prototype.nextPage=function(e){this.load(this.page+1,e)};osmplayer.playlist.prototype.prevPage=function(e){this.load(this.page-1,e)};osmplayer.playlist.prototype.load=function(e,t){this.playlist==this.options.playlist&&e==this.page&&this.loadItem(t);this.playlist=this.options.playlist;if(!this.playlist)return;var n=Math.floor(this.totalItems/this.options.pageLimit);if(e>n){if(!this.options.loop)return;e=0;t=0}this.elements.playlist_busy&&this.elements.playlist_busy.show();e=e||0;e=e<0?0:e;this.setQueue();this.page=e;this.page==0?this.pager.prevPage.hide():this.pager.prevPage.show();if(typeof this.playlist=="object"){this.set(this.playlist,t);this.playlist.endpoint&&(this.playlist=this.options.playlist=this.playlist.endpoint);return}var r=osmplayer.parser["default"];for(var i in osmplayer.parser)osmplayer.parser.hasOwnProperty(i)&&osmplayer.parser[i].valid(this.playlist)&&osmplayer.parser[i].priority>r.priority&&(r=osmplayer.parser[i]);var s=this.page*this.options.pageLimit,o=r.getFeed(this.playlist,s,this.options.pageLimit),u={type:"GET",url:o,success:function(e){return function(n){e.set(r.parse(n),t)}}(this),error:function(e){return function(t,n,r){e.elements.playlist_busy&&e.elements.playlist_busy.hide();e.trigger("error",n)}}(this)},a="";if(a=r.getType())u.dataType=a;jQuery.ajax(u)};var osmplayer=osmplayer||{};osmplayer.pager=function(e,t){minplayer.display.call(this,"pager",e,t)};osmplayer.pager.prototype=new minplayer.display;osmplayer.pager.prototype.constructor=osmplayer.pager;osmplayer.pager.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.elements.prevPage&&(this.prevPage=this.elements.prevPage.click(function(e){return function(t){t.preventDefault();e.trigger("prevPage")}}(this)));this.elements.nextPage&&(this.nextPage=this.elements.nextPage.click(function(e){return function(t){t.preventDefault();e.trigger("nextPage")}}(this)))};var osmplayer=osmplayer||{};osmplayer.teaser=function(e,t){this.preview=null;minplayer.display.call(this,"teaser",e,t)};osmplayer.teaser.prototype=new minplayer.display;osmplayer.teaser.prototype.constructor=osmplayer.teaser;osmplayer.teaser.prototype.select=function(e){};osmplayer.teaser.prototype.setNode=function(e){this.node=e;this.elements.title&&this.elements.title.text(e.title);if(e.mediafiles&&e.mediafiles.image){var t=osmplayer.getImage(e.mediafiles.image,"thumbnail");if(t&&this.elements.image){this.preview=new minplayer.image(this.elements.image);this.preview.load(t)}}this.display.unbind("click").click(function(e){return function(t){t.preventDefault();e.trigger("nodeLoad",e.node)}}(this))};